<odoo>
    <data>
        <!-- Form View  -->
        <record model="ir.ui.view" id="view_vehicle_cargo_sale_form">
            <field name="name">view_vehicle_cargo_sale_form</field>
            <field name="model">bsg_vehicle_cargo_sale</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="receive_from_customer" states="registered" type="object"
                                class="o_receive_from_customer" string="Received From Customer"
                                confirm="Are you check all information..?"/>
                        <button name="confirm_btn"
                                attrs="{'invisible':['|','|',('is_invoice_created','=',True),('state','not in',['draft']),('invoice_count', '!=', 0)]}"
                                string="Confirm" groups="bsg_cargo_sale.group_confirm_agreement,base.group_erp_manager"
                                type="object" class="o_sale_confirm"/>
                        <button name="set_draft_btn" groups="bsg_cargo_sale.group_set_to_draft" states="cancel"
                                string="Set to Draft" type="object" class="o_sale_confirm"/>
                        <!-- <button name="decline" states="draft,confirm" string="Cancel Agreement" type="object" class="o_sale_confirm" /> -->
                        <button name="cancel_agreement" string="Cancel Agreement" type="object" class="o_sale_confirm"
                                groups="bsg_cargo_sale.group_cancel_agreements"
                                attrs="{'invisible': ['|',('payment_method_code','=','credit'),('state', 'not in',['registered','confirm','pod','done','cancel_request'])]}"/>
                        <!-- states="confirm,done" -->
                        <button name="cancel_so_agreement" groups="bsg_cargo_sale.group_cancell_so" string="Cancel SO"
                                type="object" class="o_sale_confirm"
                                attrs="{'invisible':['|',('payment_method_code','!=','credit'),('state','=','cancel')]}"/>
                        <!--   <button name="set_to_draft" string="Set to Draft" type="object" class="o_sale_confirm" attrs="{'invisible':[
                             ('state','=','draft')]}"/> -->
                        <button name="initiate_return_btn" string="Initiate Return" type="object" class="o_sale_confirm"
                                attrs="{'invisible':[
                      '|','|',
                      ('no_line_to_return', '=', True),
                      ('shipment_type','!=','return'),
                      ('state','in',['draft','confirm','cancel']),
                      ]}"/>
                        <button name="register_payment_for_return"
                                groups="bsg_cargo_sale.group_register_payment_on_agreement,base.group_erp_manager"
                                string="Register Payment For Retrun Invoice" type="object" class="o_sale_confirm"
                                attrs="{'invisible':['|',('is_return_validate','=',True),('refund_invoice_count', '=', 0)]}" invisible="1"/>


                        <!-- KHALID MADE THIS CHANGE -->
                        <!--                    <button name="register_payment"
                                             groups="bsg_cargo_sale.group_cancell_so"
                                             string="Register Payment"
                                             type="object"
                                             class="o_sale_confirm"
                                             attrs="{'invisible':[
                                             '|','|',('is_validate','=',True),('state','not in',['confirm','unplanned','pod','Delivered','done']),
                                             ('payment_method_code','not in',['cash','pod','credit']),
                                             ]}"/> -->

                        <button name="register_payment"
                                groups="bsg_cargo_sale.group_cancell_so,bsg_cargo_sale.group_register_payment_on_agreement"
                                string="Register Payment"
                                type="object"
                                class="o_sale_confirm"
                                attrs="{'invisible':[                       '|','|',('is_validate','=',True),('state','not in',['confirm','unplanned','pod','Delivered','done']),                       ('payment_method_code','not in',['cash','pod','credit']),]}"/>


                        <button name="invoice_create" type="object" string="Create Invoice" class="btn-primary" attrs="{'invisible':['|',
                      '|','|',('is_invoice_created','=',True),('state','not in',['confirm','unplanned']),
                      ('payment_method_code','not in',['pod']),('invoice_count', '!=', 0)
                      ]}"/>

                        <button name="action_cancel_retrun_trip" string="Cancel Return Trip" type="object"
                                class="o_sale_confirm" attrs="{'invisible':[
                      '|','|',
                      ('no_line_to_return', '=', True),
                      ('state','in',['draft','confirm','cancel']),
                      ('shipment_type','!=','return'),
                      ]}"/>
                        <button name="print_tax_invoice" type="object" groups="account.group_account_invoice"
                                string="Print Tax Invoice" attrs="{'invisible':[('is_invoice','!=',True)]}"/>

                        <field name="state" widget="statusbar" statusbar_visible="draft,confirm,done"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="toggle_active" groups="bsg_cargo_sale.group_cargo_sale_archive" type="object"
                                    class="oe_stat_button" icon="fa-check">
                                <field name="active" widget="boolean_button"
                                       options="{&quot;terminology&quot;: &quot;active&quot;}"/>
                            </button>
                            <button name="action_view_other_invoice"
                                    groups="bsg_cargo_sale.group_register_payment_on_agreement" type="object"
                                    class="oe_stat_button" icon="fa-pencil-square-o"
                                    attrs="{'invisible': [('other_service_invoice_count', '=', 0)]}"
                                    context="{'field': 'invoice_ids'}">
                                <field name="other_service_invoice_count" widget="statinfo"
                                       string="Other Service Invoice"/>
                            </button>

                            <button style="width:25%;" name="calculated_no_of_days" type="object" class="oe_stat_button"
                                    state="Delivered" icon="fa-calculator"
                                    attrs="{'invisible':[
                          '|','|',
                          ('is_demurrage_inovice','=',True),
                          ('demurrage_check','=',True),
                          ('state','!=','Delivered'),
                          ]}" confirm="Are you sure you want to confim?">
                                <b>Release All Cars</b>
                            </button>

                            <button name="action_view_invoice" type="object" class="oe_stat_button"
                                    icon="fa-pencil-square-o" attrs="{'invisible': [('invoice_count', '=', 0)]}"
                                    context="{'field': 'invoice_ids'}">
                                <field name="invoice_count" widget="statinfo" string="Invoices"/>
                            </button>

                            <button name="action_view_refund_invoice" type="object" class="oe_stat_button"
                                    icon="fa-pencil-square-o" attrs="{'invisible': [('refund_invoice_count', '=', 0)]}"
                                    context="{'field': 'refund_invoice_ids'}">
                                <field name="refund_invoice_count" widget="statinfo" string="Refund Invoices"/>
                            </button>

                        </div>
                        <field name="warning_expired" invisible="1"/>
                        <field name="warning_to_be_expired" invisible="1"/>
                        <div role="alert" class="alert alert-danger"
                             style="height:35px;width:900px;margin-bottom:1px;background-color:red;font-weight:bold;color:white;"
                             attrs="{'invisible':['|',('warning_expired','=',False),('customer','=',False)]}">Customer
                            registration is expired.
                        </div>
                        <div role="alert" class="alert alert-danger"
                             style="height:35px;width:900px;margin-bottom:1px;background-color:red;font-weight:bold;color:white;"
                             attrs="{'invisible':['|',('warning_to_be_expired','=',False),('customer','=',False)]}">
                            Customer registration is near to be expired.
                        </div>
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </div>
                        <field name="is_invoice" invisible="1"/>
                        <field name="is_return_so" invisible="1"/>
                        <field name="is_old_order" invisible="1"/>
                        <field name="no_line_to_return" invisible="1"/>
                        <group name="top">
                            <group name="left">
                                <field name="return_intiated" invisible="1"/>
                                <field name="is_invoice_created" invisible="1"/>
                                <field name="is_validate" invisible="1"/>
                                <field name="is_return_validate" invisible="1"/>
                                <field name="company_currency_id" invisible="1"/>
                                <field name="is_currency_diff" invisible="1"/>
                                            <field name="customer_domain_ids" invisible="1"/>

                                <field name="customer_type" string="Customer Type"
                                       attrs="{'readonly':['|', ('state','!=','draft'), ('is_return_so', '=', True)]}"
                                       required="1" invisible="1"/>
                                <field name="partner_types" string="Partner Type" domain="[('restrict_partner_from_cargo','!=',True)]"
                                       attrs="{'readonly':['|', ('state','!=','draft'),('is_return_so', '=', True)]}"
                                       options="{'no_create': True, 'no_open': True}" required="1"/>
                                <field name="customer"
                                       attrs="{'readonly':['|', ('state','!=','draft'), ('is_return_so', '=', True)],'invisible':[('customer_type','!=','individual')]}"
                                       options="{'limit': 10, 'create_edit': True}"
                                       required="1"
                                       context="{'default_customer_rank':1,'default_is_company':False,'default_property_product_pricelist' : 1,'partner_type_val' : partner_types,'default_partner_types' : partner_types,'default_is_from_cargo_sale' : True}"/>
                                <field name="other_customer_id"
                                       attrs="{'invisible':[('is_to_other_customer','=',False)],'required':[('is_to_other_customer','!=',False)]}"
                                       options="{'limit': 10, 'create_edit': True}"
                                       context="{'default_customer_rank':1,'default_is_company':False,'default_property_product_pricelist' : 1,'partner_type_val' : partner_types,'default_partner_types' : partner_types,'default_is_from_cargo_sale' : True}"
                                       domain="[('customer_rank','>',0)]"
                                       groups="bsg_cargo_sale.group_can_show_creating_invoice_to_other_customer"

                                />
                                <field name="cooperate_customer"
                                       attrs="{'invisible':[('customer_type','=','individual')], 'readonly':[('state','!=','draft')]}"
                                       string="Customer"
                                       context="{'default_is_company':True,'default_property_product_pricelist' : 1,'partner_type_val' : partner_types,'default_partner_types' : partner_types,'default_is_from_cargo_sale' : True}"
                                       options="{'limit': 10, 'create_edit': True}"/>
                                <field name="branch_sr_no" invisible="1"/>
                                <field name="shipment_type" string="Agreement Type"
                                       attrs="{'readonly':['|', ('state','!=','draft'),('is_return_so', '=', True)]}"/>
                                <field name="payment_method" string="Payment Method" widget="selection"
                                       attrs="{'readonly':['|', ('state','!=','draft'), ('is_return_so', '=', True)]}"
                                       required="1"/>
                                <field name="baptizing_number"/>
                                <field name="payment_method_code" invisible="1"/>
                                <field name="allow_contract" string="Apply Dealer Price" readonly="1"
                                       attrs="{'invisible':[('customer_type','!=','corporate')]}"/>
                                <field name="is_credit_customer" string="Is Credit Customer" invisible="1"/>
                                <field name="is_credit_customer_parnter" invisible="1"/>
<!--                                <field name="payment_type" invisible="1"/>-->
                                <field name="is_construction" invisible="1"/>
                                <field name="allow_contract" invisible="1"/>
                                <field name="is_for_credit_attch" invisible="1"/>
                                <field name="is_attachment_required" invisible="1"/>
                                <field name="attachment_id" widget="many2many_binary"
                                       attrs="{'invisible':[('is_construction','!=',True),('allow_contract','!=',True),('is_for_credit_attch','!=',True), ('is_attachment_required', '!=', True)]}"/>
                            </group>
                            <group name="right">
                                <field name="customer_contract"
                                       attrs="{'required':[('is_credit_customer_parnter','=',True),('payment_method_code','=','credit')],
                        'invisible':[('is_credit_customer','=',False),('customer_type','!=','corporate')],'readonly':[('state','!=','draft')]}"
                                       domain="[('cont_customer','=',customer),('cont_end_date','&gt;=',order_date),('remainder_amt','&gt;',0),('state','=','confirm')]"
                                       options="{'no_open': True}"
                                />
                                <field name="cargo_invoice_to" domain="[('parent_id','=',customer)]"
                                       attrs="{'invisible':[('is_credit_customer','=',False),('customer_type','!=','corporate')], 'readonly':[('state','!=','draft')]}"/>
                                <!-- 'required':[('customer_type','=','corporate')], -->
                                <field name="customer_price_list" invisible="1"
                                       options="{'no_create': True, 'no_open': True}"
                                       attrs="{'readonly':[('state','!=','draft'),('is_return_so', '=', True)]}"
                                       string="Pricelist"/>
                                <!-- 'invisible':[('state','=','draft')], -->
                                <field name="order_date" string="Order Date" readonly="1"/>
                                <field name="recieved_from_customer_date" readonly="1"/>
                                <field name="user_id" string="Current User" invisible="1"/>
                                <field name="deliver_date" string="Delivery Date" readonly="1"/>
                                <!--options="{'datepicker':{'minDate': 'now'}}"-->
                                <!--                                <label for="est_no_delivery_days" string="Est Days From"/>-->
                                <!--                                <div class="o_address_format">-->
                                <!--                                      <field name="expected_delivery_days" force_save="1" readonly="1" class="oe_inline" />-->
                                <!--                                      <field name="expected_hours" force_save="1" widget='float_time' readonly="1" class="oe_inline" style="margin-left: 12px;" />-->
                                <!--                                        <span style="margin-left: 12px;">TO</span>-->
                                <!--                                      <field name="est_max_no_delivery_days" force_save="1" readonly="1" class="oe_inline" style="margin-left: 12px;" />-->
                                <!--                                      <field name="est_max_no_hours" force_save="1" widget='float_time' readonly="1" style="margin-left: 12px;"  class="o_address_zip" />-->
                                <!--                                        <span style="margin-left: 12px;">days</span>-->
                                <!--                                </div>-->
                                <field name="actual_deliver_date" string="Actual Delivery Date" readonly="1"/>
                                <field name="route" invisible="1"/>
                                <field name="is_satah" invisible="1"/>
                                <field name="barcode" invisible="1"/>
                                <field name="cargo_sale_type" invisible="1"/>
                            </group>
                        </group>
                        <group name="first_leg" string="First Leg"
                               attrs="{'invisible':[('shipment_type','!=','return'),('state','!=','awaiting')]}"></group>
                        <group name="first_leg_resvr_scr_top">
                            <group name="resvr_scr_left">
                                <!--  groups="sales_team.group_sale_manager,bsg_cargo_sale.group_create_agreement_for_individual,bsg_cargo_sale.group_create_agreement_for_corporate"-->
                                <field name="other_service_status" invisible="1"/>
                                <field name="allow_change_loc"
                                       groups="bsg_cargo_sale.group_change_location_for_shipment"
                                       attrs="{'readonly':['|', ('state','!=','draft'), ('is_return_so', '=', True)]}"/>

                                <field name="loc_from" string="From" required="1"
                                       domain="[('is_close_location','!=',True),('id','!=',loc_to),('branch_type','in',['shipping','both'])]"
                                       attrs="{'readonly':['|',('allow_change_loc','=',False),('state','!=','draft')]}"
                                       options='{"no_open": True,"no_create": True}'
                                       groups="bsg_cargo_sale.group_change_location_for_shipment"
                                />
                            </group>
                            <group name="resvr_scr_right">
                                <field name="is_to_other_customer"
                                       groups="bsg_cargo_sale.group_can_show_creating_invoice_to_other_customer"/>

                                <field name="loc_to" string="To" required="1"
                                       domain="[('is_close_location','!=',True),('id','!=',loc_from),('branch_type','in',['pickup','both'])]"
                                       attrs="{'readonly':['|', ('state','!=','draft'),('is_return_so', '=', True)]}"
                                       options='{"no_open": True,"no_create": True}'
                                       groups="bsg_cargo_sale.group_change_location_for_shipment"
                                />
                            </group>
                        </group>
                        <group name="second_leg" string="Second Leg"
                               attrs="{'invisible':[('shipment_type','!=','return'),('state','!=','awaiting')]}"></group>
                        <group name="second_leg_resvr_scr_top">
                            <group name="second_resvr_scr_left">
                                <field name="is_other_service_invoice" invisible="1"/>
                                <field name="return_loc_from" string="From" attrs="{'invisible':[('shipment_type','!=','return'),('state','!=','awaiting')],
                        'readonly':['|', ('allow_change_loc','=',False), ('is_return_so', '=', True)]}"
                                       options='{"no_open": True,"no_create": True}'
                                       domain="[('id','!=',return_loc_to),('loc_branch_id.branch_type','in', ['shipping', 'both']),('location_type','in',['albassami_loc','customer_loc'])]"
                                       groups="bsg_cargo_sale.group_change_location_for_shipment"
                                />
                            </group>
                            <group name="second_resvr_scr_right">
                                <field name="return_loc_to" string="To" attrs="{'invisible':[('shipment_type','!=','return'),('state','!=','awaiting')],
                        'readonly':[('allow_change_loc','=',False)]}" options='{"no_open": True,"no_create": True}'
                                       domain="[('id','!=',return_loc_from),('loc_branch_id.branch_type','in', ['pickup', 'both']),('location_type','in',['albassami_loc','customer_loc'])]"
                                       groups="bsg_cargo_sale.group_change_location_for_shipment"
                                />
                                <field name="return_so_id" attrs="{'invisible':[('shipment_type','!=','return')]}"/>
                                <div attrs="{'invisible': [('partner_types','=', 1), ('customer_price_list','=', 1)]}">
                                    <field name="coupon_readonly" invisible="1"/>
                                    <field name="qitaf_coupon" attrs="{'readonly': ['|',('coupon_readonly', '=', True),('state', '!=', 'draft')]}"
                                           class="oe_inline"/>
                                    <button name="action_get_qitaf_discount" string="Process Coupon" type="object"
                                            class="btn-primary oe_inline"
                                            attrs="{'invisible': ['|',('coupon_readonly', '=', True),('state', '!=', 'draft')]}"/>
                                    <field name="qitaf_discount_type" readonly="1"/>
                                </div>
                            </group>
                        </group>
                        <field name="max_line_sequence" invisible="1"/>
                        <notebook name="notebook">
                            <page name="order" string="Order" autofocus="autofocus"
                                  attrs="{'invisible':['|',('loc_from','=',False),('loc_to','=',False)]}"
                                  groups="bsg_cargo_sale.group_change_location_for_shipment"
                            >
                                <field name="order_line_ids" nolabel="1"
                                       attrs="{'readonly':['|', ('state','not in',['draft','registered']), ('is_return_so', '=', True)]}"
                                       context="{'default_is_satah': is_satah, 'default_sequence': max_line_sequence,
                                 'default_bsg_cargo_sale_id' : active_id,'default_customer_price_list' : customer_price_list,'default_currency_id' : currency_id}">
                                    <tree string="vehicle_cargo_order_line">
                                        <field name="sequence2" readonly="1" string="Seq#"/>
                                        <field name="car_make"/>
                                        <field name="car_model" string="Model" required="1"/>
                                        <field name="car_size"/>
                                        <field name="shipment_type"/>
                                        <field name="car_classfication" invisible="1"/>
                                        <field name="year" string="Year"/>
                                        <field name="car_color" string="Color"/>
                                        <field name="chassis_no" string="Chasis No" invisible="1"/>
                                        <field name="plate_type" string="Plate Type" invisible="1"/>
                                        <field name="general_plate_no"/>
                                        <field name="service_type" string="Service" invisible="1"/>
                                        <field name="bsg_cargo_sale_id" invisible="1"/>

                                        <field name="type" string="Satah Type" invisible="1"/>
                                        <field name="state" string="Status" readonly="1"/>
                                        <field name="cargo_sale_state" string="Cargo Status" invisible="1"/>
                                        <field name="unit_charge" invisible="1"/>
                                        <field name="discount"/>
                                        <field name="discount_price" invisible="1"/>
                                        <field name="tax_ids" widget="many2many_tags"
                                               options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                                        <field name="amount_with_satah" invisible="1"/>
                                        <field name="inspection_id" invisible="1"/>
                                        <field name="total_without_tax" string="Amount without Tax"/>
                                        <field name="tax_amount" invisible="1"/>
                                        <field name="charges" string="Amount withTax"/>
                                        <field name="is_satah" invisible="1"/>
                                        <button name="action_inspect_view" type="object"
                                                icon="/bsg_cargo_sale/static/src/img/inspection.png"/>
                                        <button name="dup_line" type="object"
                                                icon="/bsg_cargo_sale/static/src/img/copy.png"
                                                attrs="{'invisible':[('parent.state','!=','draft')]}"/>
                                        <!-- <button name="print_empty_data"  type="object" class="btn-primary" style="color:black;" icon="fa-print" string="Print Agreement Template"/> -->
                                        <button name="print_shipment_data"
                                                attr="{'invisible':[('state','=','registered')]}" type="object"
                                                class="btn-primary" style="color:red;" icon="fa-bookmark"
                                                string="Print Agreement Data"/>
                                        <button name="action_print_shipment"
                                                attr="{'invisible':[('state','=','registered')]}" type="object"
                                                class="btn-primary" style="color:black;" icon="fa-print"/>
                                        <button name="action_print_inspection"
                                                attr="{'invisible':[('state','=','registered')]}" invisible="1"
                                                type="object" class="btn-primary" style="color:red;" icon="fa-print"/>
                                        <button name="action_email_shipment"
                                                attr="{'invisible':[('state','=','registered')]}" type="object"
                                                class="btn-primary" style="color:black;" icon="fa-envelope"
                                                help="Send agreement by emial to your customers."
                                                string="Send Agreement By Email"/>
                                        <button name="action_print_cs_delivery"
                                                attr="{'invisible':[('state','=','registered')]}" invisible="1"
                                                type="object" class="btn-primary" style="color:green;" icon="fa-print"/>
<!--                                        Migration Note this button define in cargo_tag_report module which is not in cuurent repo yet -->
<!--                                        once this module will be moved in this repo this button will be useable-->
<!--                                        <button name="print_tag_report" type="object" class="btn-primary"-->
<!--                                                style="color:green;" icon="fa-tag" string="Cargo Tag"/>-->
                                    </tree>
                                    <form>
                                        <header>
                                            <button style="color:blue;" name="calculated_no_of_days" type="object"
                                                    class="btn-primary" state="Delivered"
                                                    attrs="{'invisible':[
                                        '|','|',
                                        ('is_demurrage_inovice','=',True),
                                        ('demurrage_check','=',True),
                                        ('state','!=','Delivered'),
                                        ]}" confirm="Are you sure you want to confim?" string="Release Car"/>
                                            <field name="state" widget="statusbar"/>
                                        </header>
                                        <sheet>
                                            <group name="top">
                                                <group name="left">
                                                    <field name="currency_id" invisible="1"/>
                                                    <field name="company_currency_id" invisible="1"/>
                                                    <field name="is_currency_diff" invisible="1"/>
                                                    <field name="shipment_type"
                                                           options='{"no_open": True,"no_create": True}' required="1"
                                                           attrs="{'readonly':['|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True)]}"/>
                                                    <field name="car_make" options='{"no_open": True,"no_create": True}'
                                                           required="1"
                                                           attrs="{'readonly':['|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True)]}"/>
                                                    <field name="car_model" string="Model" required="1"
                                                           options='{"no_open": True,"no_create": True}'
                                                           attrs="{'readonly':['|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True)]}"/>
                                                    <field name="car_size"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="plate_registration" string="Registration Type"
                                                           required="1"/>
                                                    <field name="plate_type" string="Plate Type"
                                                           attrs="{'required':[('plate_registration','!=','new_vehicle')]}"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="chassis_no" string="Chasis No"
                                                           attrs="{'required':[('plate_registration','=','new_vehicle')]}"/>
                                                    <field name="type" string="Satah Type"
                                                           attrs="{'readonly':['|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True)]}"/>
                                                    <field name="unit_charge" invisible="1"/>
                                                    <field name="price_line_id" invisible="1"/>
                                                    <field name="tax_ids" widget="many2many_tags" invisible="1"/>
                                                    <field name="total_without_tax" string="Amount without Tax"
                                                           widget='monetary'
                                                           options="{'currency_field': 'currency_id'}"/>
                                                    <field name="additional_ship_amount" widget='monetary'
                                                           options="{'currency_field': 'currency_id'}"/>
                                                    <field name="owner_id" string="Owner Deal"
                                                           options='{"no_open": True,"no_create": True}'
                                                           attrs="{'readonly':['|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True)]}"/>

                                                </group>
                                                <group name="right">
                                                    <field name="year" string="Year" required="1"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="car_classfication" invisible="1"/>
                                                    <field name="car_color" string="Color"
                                                           options='{"no_open": True,"no_create": True}' required="1"/>
                                                    <field name="expected_delivery" force_save="1"
                                                           string="Delivery Date" readonly="1"/>
                                                    <label for="est_no_delivery_days" string="Est Days From"/>
                                                    <div class="o_address_format">
                                                        <field name="est_no_delivery_days" force_save="1" readonly="1"
                                                               class="oe_inline"/>
                                                        <span style="margin-right: 12px;">الي</span>
                                                        <field name="est_max_no_delivery_days" force_save="1"
                                                               readonly="1" class="oe_inline"
                                                               style="margin-right: 12px;"/>
                                                        <span style="margin-right: 12px;">أيام</span>
                                                    </div>
                                                    <field name="non_saudi_plate_no"
                                                           attrs="{'required':[('plate_registration','=','non-saudi')],'invisible':[('plate_registration','=','saudi')]}"/>
                                                    <label for="plate_no"
                                                           attrs="{'invisible':[('plate_registration','!=','saudi')]}"/>
                                                    <div class="o_address_format"
                                                         attrs="{'invisible':[('plate_registration','!=','saudi')]}">
                                                        <field name="palte_third" class="oe_inline"
                                                               attrs="{'required':[('plate_registration','=','saudi')]}"/>
                                                        <field name="palte_second" class="oe_inline"
                                                               style="margin-left: 12px;"
                                                               attrs="{'required':[('plate_registration','=','saudi')]}"/>
                                                        <field name="palte_one" class="oe_inline"
                                                               style="margin-left: 12px;"
                                                               attrs="{'required':[('plate_registration','=','saudi')]}"/>
                                                        <field name="plate_no" style="margin-left: 12px;"
                                                               class="o_address_zip"
                                                               attrs="{'required':[('plate_registration','=','saudi')]}"/>
                                                        <br></br>
                                                        <span style="width:100%"
                                                              invisible="context.get('lang') != 'ar_001'">&amp;nbsp; ح
                                                            (1) &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ح
                                                            (2) &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ح
                                                            (3)
                                                        </span>
                                                        <span style="width:100%"
                                                              invisible="context.get('lang') != 'en_US'">&amp;nbsp; L(1)
                                                            &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; L(2)
                                                            &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; L(3)
                                                        </span>
                                                    </div>
                                                    <field name="service_type" string="Cargo Service" invisible="1"/>
                                                    <field name="service_type_name" string="Service" readonly="1"/>

                                                    <field name="customer_price_list" domain="['|',('location_domain','!=',True),'|',('loc_from_ids','=',False),('loc_from_ids','in',parent.loc_from),'|',('loc_to_ids','=',False)
                                    ,('loc_to_ids','in',parent.loc_to),'|',('partner_types','=',False),('partner_types','in',parent.partner_types),'|',('shipment_type','=',False),('shipment_type','in',shipment_type)
                                    ,'|',('date_from','=',False),('date_from','&lt;=',parent.order_date),'|',('date_to','=',False),('date_to','&gt;=',parent.order_date),'|',('agreement_type','=',False),('agreement_type','=',parent.shipment_type)]"
                                                           options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"
                                                           attrs="{'readonly':['|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True)]}"
                                                           string="Pricelist"/>
                                                    <field name="is_public_pricelist" invisible="1"/>
                                                    <field name="is_qr_code_required" invisible="1"/>
                                                    <field name="qr_code"
                                                           attrs="{'invisible':[('is_qr_code_required','!=',True)],'required':[('is_qr_code_required','=',True)],'readonly':['|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True)]}"/>
                                                    <field name="discount"
                                                           attrs="{'readonly':['|','|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True),('is_public_pricelist','!=',True)]}"
                                                           groups="bsg_cargo_sale.group_cargo_sale_line_discount"
                                                           force_save="1"/>
                                                    <field name="fixed_discount"
                                                           groups="bsg_cargo_sale.group_cargo_sale_line_discount"
                                                           attrs="{'readonly':['|','|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True),('is_public_pricelist','!=',True)]}"
                                                           force_save="1"/>
                                                    <field name="fixed_discount"
                                                           groups="bsg_cargo_sale.group_cargo_sale_line_discount"
                                                           attrs="{'readonly':['|','|', ('parent.state','!=','draft'), ('parent.is_return_so', '=', True),('is_public_pricelist','!=',True)]}"
                                                           force_save="1"/>
                                                    <field name="amount_with_satah" widget='monetary'
                                                           options="{'currency_field': 'currency_id'}"/>
                                                    <field name="tax_amount" widget='monetary'
                                                           options="{'currency_field': 'currency_id'}"/>
                                                    <field name="charges" string="Amount withTax" widget='monetary'
                                                           options="{'currency_field': 'currency_id'}"/>
                                                    <field name="original_charges" string="Currency Amount"
                                                           attrs="{'invisible':[('parent.is_currency_diff','=',False)]}"
                                                           widget='monetary'
                                                           options="{'currency_field': 'company_currency_id'}"/>
                                                    <field name="account_id"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="return_source_id" readonly="1"
                                                           options='{"no_create_edit": True}'
                                                           attrs="{'invisible':[('return_source_id','=',False)]}"/>
                                                    <field name="shipping_source_id" readonly="1"
                                                           options='{"no_create_edit": True}'
                                                           attrs="{'invisible':[('shipping_source_id','=',False)]}"/>
                                                    <field name="qitaf_coupon" readonly="1"/>
                                                    <field name="recieved_from_customer_date" readonly="1"/>
                                                </group>
                                            </group>
                                            <notebook name="notebook">
                                                <page name="demurrage_charges"
                                                      string="Demurrage Charges"
                                                      attrs="{'invisible':[('state','!=','Delivered')]}">
                                                    <group>
                                                        <group>
                                                            <field name="no_of_days"/>
                                                            <field name="current_date"/>
                                                            <field name="is_demurrage_inovice"/>
                                                            <field name="demurrage_check"/>
                                                        </group>
                                                        <group string="Price Info">
                                                            <field name="without_discount_price" widget='monetary'
                                                                   options="{'currency_field': 'currency_id'}"/>
                                                            <field name="dummurrage_discount" widget='monetary'
                                                                   options="{'currency_field': 'currency_id'}"/>
                                                            <field name="final_price" widget='monetary'
                                                                   options="{'currency_field': 'currency_id'}"/>
                                                        </group>
                                                    </group>
                                                </page>
                                            </notebook>
                                        </sheet>
                                    </form>
                                </field>
                                <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                    <field name="currency_id" invisible="1"/>
                                    <field name="total_discount" widget='monetary'
                                           options="{'currency_field': 'currency_id'}"/>
                                    <field name="tax_amount_total" widget='monetary'
                                           options="{'currency_field': 'currency_id'}" readonly="1"/>
                                    <field name="total_service_tax" widget='monetary'
                                           options="{'currency_field': 'currency_id'}"/>
                                    <field name="total_service_amount" class="oe_subtotal_footer_separator"
                                           widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                    <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                        <label for="total_amount"/>
                                    </div>
                                    <field name="total_amount" nolabel="1" class="oe_subtotal_footer_separator"
                                           widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                    <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                        <label for="total_so_amount"/>
                                    </div>
                                    <field name="total_so_amount" nolabel="1" class="oe_subtotal_footer_separator"
                                           widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                </group>
                                <field name="note" class="oe_inline"
                                       placeholder="Terms and conditions... (note: you can setup default ones in the Configuration menu)"
                                       attrs="{'readonly':[('state','!=','draft')]}"/>
                                <div class="oe_clear"/>
                            </page>
                            <page string="Satah Vehicale" attrs="{'invisible':[('is_satah','=',False)]}">
                                <field name="satah_line" context="{'default_parent_id': id}"
                                       attrs="{'readonly':[('state','!=','draft')]}">
                                    <tree editable="bottom" create="false">
                                        <field name="cargo_sale_id" invisible="1"/>
                                        <field name="product_id" invisible="1"/>
                                        <field name="plate_no"/>
                                        <field name="is_google_cords"/>
                                        <field name="location_lat"
                                               attrs="{'invisible':[('is_google_cords','=',False)]}"/>
                                        <field name="location_long"
                                               attrs="{'invisible':[('is_google_cords','=',False)]}"/>
                                        <field name="loc_src"
                                               attrs="{'readonly':[('is_google_cords','=',True),('loc_src','=',False)]}"/>
                                        <field name="loc_dest"
                                               attrs="{'readonly':[('is_google_cords','=',True),('loc_dest','=',False)]}"/>
                                        <field name="satah_type"/>
                                        <field name="type"/>
                                        <field name="distance"/>
                                        <field name="price"/>
                                        <field name="discount"/>
                                        <field name="final_amount"/>
                                        <button name="%(bsg_cargo_sale.action_map_wizard)d" type="action"
                                                class="oe_stat_button" string="Get Distance" icon="fa-street-view"
                                                style="font-size: 18px;"/>
                                        <button name="ActionGteDistance" type="object" class="oe_stat_button"
                                                string="Get Distance" icon="fa-map-signs" style="font-size: 18px;"/>
                                    </tree>
                                </field>
                            </page>
                            <page name="service_type_product" string="Other Services"
                                  attrs="{'invisible':['|',('loc_from','=',False),('loc_to','=',False)]}"
                                  groups="bsg_cargo_sale.group_change_location_for_shipment"
                            >
                                <field name="other_service_line_ids" nolabel="1">
                                    <!-- attrs="{'readonly':[('is_other_service_invoice','=',True)]}" -->
                                    <tree string="other_service_line_ids" editable="bottom"
                                          attrs="{'readonly':[('is_invoice_create','=',True)]}">
                                        <field name="is_other_service_invoice" invisible="1"/>
                                        <field name="is_allow_pay_with_fc" invisible="1"/>
                                        <field name="is_invoice_create" invisible="1"/>
                                        <field name="is_other_service_status" invisible="1"/>
                                        <field name="cargo_sale_line_id" domain="[('id','in',parent.order_line_ids)]"
                                               attrs="{'readonly':['|',('is_invoice_create','=',True),('is_other_service_invoice','=',True)]}"
                                               options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
                                        <field name="product_id" required="1"
                                               options="{'no_create': True, 'no_open': True}"
                                               attrs="{'readonly':['|',('is_invoice_create','=',True),('is_other_service_invoice','=',True)]}"/>
                                        <field name="currency_id"
                                               attrs="{'readonly': ['|',('is_invoice_create','=',True),('is_allow_pay_with_fc', '=', False)]}"
                                               options="{'no_create': True, 'no_open': True}"
                                               groups="base.group_multi_currency"/>
                                        <field name="cost" required="1"
                                               attrs="{'readonly':['|',('is_invoice_create','=',True),('is_other_service_invoice','=',True)]}"/>
                                        <field name="description"
                                               attrs="{'readonly':['|',('is_invoice_create','=',True),('is_other_service_invoice','=',True)]}"/>
                                        <field name="cargo_sale_id" invisible="1"/>
                                        <field name="tax_ids" widget="many2many_tags" readonly="1" force_save="1"/>
                                        <field name="tax_amount" readonly="1" force_save="1"/>
                                        <field name="without_tax_amount" readonly="1" force_save="1"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="product_id"/>
                                                <field name="cost"/>
                                            </group>
                                            <group>
                                                <field name="description"/>
                                            </group>
                                        </group>
                                    </form>
                                </field>

                                <button name="create_other_serive_invoice" type="object" class="oe_stat_button"
                                        string="Create OtherService Invoice" icon="fa-pencil" style="font-size: 18px;"/>

                                <!--  no need as per M.khaleed -->
                                <!--  <button name="create_other_serive_invoice" type="object" class="oe_stat_button" string="Create OtherService Invoice" icon="fa-pencil" style="font-size: 18px;" attrs="{'invisible':[('is_other_service_invoice','=',True)]}"/>

                                 <button name="other_serive_register_payment" type="object" class="oe_stat_button" string="Register Payment" groups="bsg_cargo_sale.group_register_payment_on_agreement,base.group_erp_manager" icon="fa-arrow-circle-o-right" style="font-size: 18px;margin-left:100px;" attrs="{'invisible':['|',('other_service_status','=',True),('is_other_service_invoice','=',False)]}"/> -->

                                <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                    <field name="total_service_without_tax" widget='monetary'
                                           options="{'currency_field': 'currency_id'}" readonly="1"/>
                                    <field name="total_service_tax" widget='monetary'
                                           options="{'currency_field': 'currency_id'}"/>
                                    <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                        <label for="total_service_amount"/>
                                    </div>
                                    <field name="total_service_amount" nolabel="1" class="oe_subtotal_footer_separator"
                                           widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                </group>

                            </page>
                            <page name="shipper_reciever" string="Shipper And Receiver Details"
                                  attrs="{'invisible':['|',('loc_from','=',False),('loc_to','=',False)]}"
                                  groups="bsg_cargo_sale.group_change_location_for_shipment"
                            >
                                <field name="is_from_contract_api" invisible="1"/>
                                <group name="sender_top">
                                    <group name="sender" string="Sender">
                                        <field name="same_as_customer"
                                               attrs="{'invisible':[('as_customer_id','=',True)]}"
                                               groups="bsg_cargo_sale.group_can_show_creating_invoice_to_other_customer"
                                        />
                                    </group>
                                    <group name="sender_top">
                                        <group name="sender">
                                            <field name="as_customer_id"
                                                   attrs="{'invisible':['|',('is_to_other_customer','!=',True),('same_as_customer','=',True)]}"
                                                   groups="bsg_cargo_sale.group_can_show_creating_invoice_to_other_customer"
                                            />
                                        </group>
                                    </group>
                                    <group name="sender_left">
                                        <field name="sender_name"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="sender_type"
                                               attrs="{'readonly':[('state','!=','draft')], 'required':[('is_from_contract_api','!=',True)]}"/>
                                        <field name="sender_nationality"
                                               attrs="{'readonly':[('state','!=','draft')],'required':[('is_from_contract_api','!=',True)]}"
                                               options="{&quot;no_open&quot;: True,&quot;no_create&quot;: True}"/>
                                    </group>
                                    <group name="sender_right">
                                        <field name="sender_id_type"
                                               attrs="{'readonly':[('state','!=','draft')], 'required':[('is_from_contract_api','!=',True)]}"/>
                                        <field name="sender_id_card_no"
                                               attrs="{'readonly':[('state','!=','draft')],'required':[('is_from_contract_api','!=',True)]}"/>
                                        <field name="sender_visa_no"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <label for="sender_mob_no"/>
                                        <div class="o_address_format">
                                            <field name="sender_mob_country_code"
                                                   attrs="{'readonly':[('state','!=','draft')],'required':[('state','=','draft')]}"/>
                                            <field name="sender_mob_no" class="o_address_zip"
                                                   attrs="{'readonly':[('state','!=','draft')],'required':[('state','=','draft')]}"/>
                                        </div>
                                    </group>
                                </group>
                                <group name="owner" string="Owner">
                                    <field name="same_as_sender"
                                           attrs="{'readonly':[('state','not in',['draft','registered'])]}"/>
                                </group>
                                <group name="owner_top">
                                    <group name="owner_left">
                                        <field name="owner_name"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="owner_type"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="owner_nationality"
                                               attrs="{'readonly':[('state','!=','draft')]}"
                                               options="{&quot;no_open&quot;: True,&quot;no_create&quot;: True}"/>
                                    </group>
                                    <group name="owner_right">
                                        <field name="owner_id_type"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="owner_id_card_no"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <field name="owner_visa_no"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                    </group>
                                </group>
                                <group name="receiver" string="Receiver">
                                    <field name="same_as_owner"
                                           attrs="{'readonly':[('state','not in',['draft','registered'])]}"/>
                                </group>
                                <group name="receiver_top">
                                    <group name="receiver_left">
                                        <field name="receiver_name"
                                               attrs="{'readonly':[('state','!=','draft')],'required':[('is_from_contract_api','!=',True)]}"/>
                                        <field name="receiver_type"
                                               attrs="{'readonly':[('state','!=','draft')],'required':[('is_from_contract_api','!=',True)]}"/>
                                        <field name="receiver_nationality"
                                               attrs="{'readonly':[('state','!=','draft')],'required':[('is_from_contract_api','!=',True)]}"
                                               options="{&quot;no_open&quot;: True,&quot;no_create&quot;: True}"/>
                                    </group>
                                    <group name="receiver_right">
                                        <field name="receiver_id_type"
                                               attrs="{'readonly':[('state','!=','draft')],'required':[('is_from_contract_api','!=',True)]}"/>
                                        <field name="receiver_id_card_no"
                                               attrs="{'readonly':[('state','!=','draft')]}"
                                               required="0"/>
                                        <field name="receiver_visa_no"
                                               attrs="{'readonly':[('state','!=','draft')]}"/>
                                        <label for="receiver_mob_no"/>
                                        <div class="o_address_format">
                                            <field name="receiver_mob_country_code"
                                                   attrs="{'readonly':[('state','!=','draft')],'required':[('is_from_contract_api','!=',True)]}"
                                                   required="1"/>
                                            <field name="receiver_mob_no" class="o_address_zip"
                                                   attrs="{'readonly':[('state','!=','draft')],'required':[('is_from_contract_api','!=',True)]}"
                                                   required="1"/>
                                        </div>
                                        <field name="no_of_copy" required="1"/>
                                    </group>
                                </group>
                            </page>


                            <page name="returning_order" string="Return Leg"
                                  attrs="{'invisible':[('shipment_type','=','oneway')]}">
                                <field name="return_order_line_ids" nolabel="1"
                                       attrs="{'readonly':[('state','!=','draft')]}">
                                    <tree string="return_order_line">
                                        <field name="sequence2" readonly="1" string="Seq#"/>
                                        <field name="car_make"/>
                                        <field name="car_model" string="Model" required="1"/>
                                        <field name="car_size"/>
                                        <field name="shipment_type"/>
                                        <field name="car_classfication" invisible="1"/>
                                        <field name="year" string="Year"/>
                                        <field name="car_color" string="Color"/>
                                        <field name="chassis_no" string="Chasis No" invisible="1"/>
                                        <field name="plate_type" string="Plate Type" invisible="1"/>
                                        <field name="general_plate_no"/>
                                        <field name="service_type" string="Service" invisible="1"/>
                                        <field name="bsg_cargo_sale_id" invisible="1"/>
                                        <field name="type" string="Satah Type"/>
                                        <field name="state" string="Status" readonly="1"/>
                                        <field name="cargo_sale_state" string="Cargo Status" invisible="1"/>
                                        <field name="unit_charge" invisible="1"/>
                                        <field name="discount"/>
                                        <field name="discount_price" invisible="1"/>
                                        <field name="tax_ids" widget="many2many_tags"/>
                                        <field name="amount_with_satah"/>
                                        <field name="inspection_id"/>
                                        <field name="total_without_tax" string="Amount without Tax"/>
                                        <field name="tax_amount" invisible="1"/>
                                        <field name="charges" string="Amount withTax"/>
                                        <field name="is_satah" invisible="1"/>
                                        <button name="action_inspect_view" type="object"
                                                icon="/bsg_cargo_sale/static/src/img/inspection.png"/>
                                        <button name="dup_line" type="object"
                                                icon="/bsg_cargo_sale/static/src/img/copy.png"
                                                attrs="{'invisible':[('parent.state','!=','draft')]}"/>
                                        <!-- <button name="print_empty_data"  type="object" class="btn-primary" style="color:black;" icon="fa-print" string="Print Agreement Template"/> -->
                                        <button name="print_shipment_data" type="object" class="btn-primary"
                                                style="color:red;" icon="fa-bookmark" string="Print Agreement Data"/>
                                        <button name="action_print_inspection" type="object" class="btn-primary"
                                                style="color:red;" icon="fa-print"/>
                                        <button name="action_print_shipment" type="object" class="btn-primary"
                                                style="color:black;" icon="fa-print"/>
                                        <button name="action_email_shipment" type="object" class="btn-primary"
                                                style="color:black;" icon="fa-envelope"
                                                help="Send agreement by emial to your customers."
                                                string="Send Agreement By Email"/>
                                        <button name="action_print_cs_delivery" type="object" class="btn-primary"
                                                style="color:green;" icon="fa-print"/>
                                    </tree>
                                    <form>
                                        <header>
                                            <button style="color:blue;" name="calculated_no_of_days" type="object"
                                                    class="btn-primary" state="Delivered"
                                                    attrs="{'invisible':[
                                        '|','|',
                                        ('is_demurrage_inovice','=',True),
                                        ('demurrage_check','=',True),
                                        ('state','!=','Delivered'),
                                        ]}" confirm="Are you sure you want to confim?" string="Release Car"/>
                                            <field name="state" widget="statusbar"/>
                                        </header>
                                        <sheet>
                                            <group name="top">
                                                <group name="left">
                                                    <field name="shipment_type"
                                                           options='{"no_open": True,"no_create": True}' required="1"/>
                                                    <field name="car_make" options='{"no_open": True,"no_create": True}'
                                                           required="1"/>
                                                    <field name="car_model" string="Model" required="1"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="car_size"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="plate_registration" string="Registration Type"
                                                           required="1"/>
                                                    <field name="plate_type" string="Plate Type"
                                                           attrs="{'required':[('plate_registration','!=','new_vehicle')]}"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="chassis_no" string="Chasis No"
                                                           attrs="{'required':[('plate_registration','=','new_vehicle')]}"/>
                                                    <field name="type" string="Satah Type"/>
                                                    <field name="unit_charge" invisible="1"/>
                                                    <field name="price_line_id" invisible="1"/>
                                                    <field name="tax_ids" widget="many2many_tags" invisible="1"/>
                                                    <field name="total_without_tax" string="Amount without Tax"/>
                                                </group>
                                                <group name="right">
                                                    <field name="year" string="Year"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="car_classfication" invisible="1"/>
                                                    <field name="car_color" string="Color"
                                                           options='{"no_open": True,"no_create": True}'/>
                                                    <field name="expected_delivery" force_save="1"
                                                           string="Delivery Date" readonly="1"/>
                                                    <field name="non_saudi_plate_no"
                                                           attrs="{'required':[('plate_registration','=','non-saudi')],'invisible':[('plate_registration','=','saudi')]}"/>
                                                    <label for="plate_no"
                                                           attrs="{'invisible':[('plate_registration','!=','saudi')]}"/>
                                                    <div class="o_address_format"
                                                         attrs="{'invisible':[('plate_registration','!=','saudi')]}">
                                                        <field name="palte_third" class="oe_inline"
                                                               attrs="{'required':[('plate_registration','=','saudi')]}"/>
                                                        <field name="palte_second" class="oe_inline"
                                                               style="margin-left: 12px;"
                                                               attrs="{'required':[('plate_registration','=','saudi')]}"/>
                                                        <field name="palte_one" class="oe_inline"
                                                               style="margin-left: 12px;"
                                                               attrs="{'required':[('plate_registration','=','saudi')]}"/>
                                                        <field name="plate_no" style="margin-left: 12px;"
                                                               class="o_address_zip"
                                                               attrs="{'required':[('plate_registration','=','saudi')]}"/>
                                                    </div>
                                                    <field name="service_type" string="Cargo Service" invisible="1"/>
                                                    <field name="service_type_name" string="Service" readonly="1"/>

                                                    <field name="is_pricelist_discount" invisible="1"/>
                                                    <field name="discount"
                                                           attrs="{'readonly':[('is_pricelist_discount','=',True)]}"
                                                           groups="bsg_cargo_sale.group_cargo_sale_line_discount"/>
                                                    <field name="fixed_discount"
                                                           groups="bsg_cargo_sale.group_cargo_sale_line_discount"/>
                                                    <field name="amount_with_satah"/>
                                                    <field name="tax_amount"/>
                                                    <field name="charges" string="Amount withTax"/>
                                                    <field name="account_id"
                                                           options='{"no_open": True,"no_create": True}'/>

                                                </group>
                                            </group>
                                            <notebook name="notebook">
                                                <page name="demurrage_charges"
                                                      string="Demurrage Charges"
                                                      attrs="{'invisible':[('state','!=','Delivered')]}">
                                                    <group>
                                                        <group>
                                                            <field name="no_of_days"/>
                                                            <field name="current_date"/>
                                                            <field name="is_demurrage_inovice"/>
                                                            <field name="demurrage_check"/>
                                                        </group>
                                                        <group string="Price Info">
                                                            <field name="without_discount_price" widget='monetary'
                                                                   options="{'currency_field': 'currency_id'}"/>
                                                            <field name="dummurrage_discount" widget='monetary'
                                                                   options="{'currency_field': 'currency_id'}"/>
                                                            <field name="final_price" widget='monetary'
                                                                   options="{'currency_field': 'currency_id'}"/>
                                                        </group>
                                                    </group>
                                                </page>
                                            </notebook>
                                        </sheet>
                                    </form>
                                </field>
                                <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                    <field name="currency_id" invisible="1"/>
                                    <field name="total_discount" widget='monetary'
                                           options="{'currency_field': 'currency_id'}"/>
                                    <field name="tax_amount_total" widget='monetary'
                                           options="{'currency_field': 'currency_id'}" readonly="1"/>
                                    <field name="total_service_tax" widget='monetary'
                                           options="{'currency_field': 'currency_id'}"/>
                                    <field name="total_service_amount" class="oe_subtotal_footer_separator"
                                           widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                    <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                        <label for="total_amount"/>
                                    </div>
                                    <field name="total_amount" nolabel="1" class="oe_subtotal_footer_separator"
                                           widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                </group>
                                <field name="note" class="oe_inline"
                                       placeholder="Terms and conditions... (note: you can setup default ones in the Configuration menu)"
                                       attrs="{'readonly':[('state','!=','draft')]}"/>
                                <div class="oe_clear"/>
                            </page>
                            <!-- Returning Order  page ended-->
                            <page name="demurrage_charges" string="Demurrage Charges"
                                  attrs="{'invisible':[('state','!=','Delivered')],'readonly':[('state','!=','draft')]}">
                                <group>
                                    <group>
                                        <field name="no_of_days"/>
                                        <field name="current_date"/>
                                        <field name="total_line" invisible="1"/>
                                        <field name="is_demurrage_inovice"/>
                                        <field name="demurrage_check"/>
                                    </group>
                                    <group string="Price Info">
                                        <field name="without_discount_price" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="discount_price" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                        <field name="final_price" widget='monetary'
                                               options="{'currency_field': 'currency_id'}"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
        <!-- Tree View -->
        <record model="ir.ui.view" id="view_vehicle_cargo_sale_tree">
            <field name="name">view_vehicle_cargo_sale_tree</field>
            <field name="model">bsg_vehicle_cargo_sale</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="customer_type" string="Customer Type" invisible="1"/>
                    <field name="partner_types" string="Partner Type"/>
                    <field name="customer"/>
                    <field name="shipment_type" string="Shipment Type"/>
                    <field name="payment_method" string="Payment Method"/>
                    <field name="loc_from" string="From"/>
                    <field name="loc_to" string="To"/>
                    <field name="order_date" string="Order Date"/>
                    <field name="user_id" string="Current User"/>
                    <!--<field name="deliver_date" string="Delivery Date" invisible="1"/>-->
                    <field name="expected_delivery_days" invisible="1" string="Expected Delivery Days"/>
                    <!--<field name="route" invisible="1"/>-->
                    <field name="total_without_tax" sum="Total without Tax"/>
                    <!--<field name="total_discount" sum="Total Discount"/>-->
                    <!--<field name="paid_amount" sum="Total Paid Amount"/>-->
                    <!--<field name="net_amount" sum="Total Net Amount"/>-->
                    <field name="total_amount" invisible="0" sum="Total Amount"/>
                </tree>
            </field>
        </record>

        <!-- kanban view -->
        <record model="ir.ui.view" id="bsg_vehicle_cargo_sale_kanban">
            <field name="name">bsg_vehicle_cargo_sale.kanban</field>
            <field name="model">bsg_vehicle_cargo_sale</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="name"/>
                    <field name="customer"/>
                    <field name="total_amount"/>
                    <field name="order_date"/>
                    <field name="state"/>
                    <field name="currency_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_record_top">
                                    <div class="o_kanban_record_headings">
                                        <strong class="o_kanban_record_title">
                                            <span>
                                                <t t-esc="record.customer.value"/>
                                            </span>
                                        </strong>
                                    </div>
                                    <strong>
                                        <field name="total_amount" widget="monetary"/>
                                    </strong>
                                </div>
                                <div class="o_kanban_record_bottom">
                                    <div class="oe_kanban_bottom_left text-muted">
                                        <span>
                                            <t t-esc="record.name.value"/>
                                            <t t-esc="record.order_date.value"/>
                                        </span>
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <span class="float-right text-right">
                                            <field name="state" widget="label_selection" options="{'classes': {'draft': 'default', 'cancel': 'default', 'none': 'danger', 'cancel': 'warning',
                                        'Delivered': 'success'}}"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <!-- pivot view -->
        <record model="ir.ui.view" id="view_bsg_vehicle_cargo_sale_pivot">
            <field name="name">bsg_vehicle_cargo_sale.pivot</field>
            <field name="model">bsg_vehicle_cargo_sale</field>
            <field name="arch" type="xml">
                <pivot string="Cargo Sale" display_quantity="true">
                    <field name="customer"/>
                    <field name="total_amount" type="measure"/>
                    <field name="total_discount" invisible="1"/>
                    <field name="tax_amount_total" invisible="1"/>
                    <field name="total_service_amount" invisible="1"/>
                </pivot>
            </field>
        </record>

        <!-- graph view -->
        <record model="ir.ui.view" id="view_bsg_vehicle_cargo_sale_graph">
            <field name="name">bsg_vehicle_cargo_sale.graph</field>
            <field name="model">bsg_vehicle_cargo_sale</field>
            <field name="arch" type="xml">
                <graph string="Cargo Sale">
                    <field name="customer"/>
                    <field name="total_amount" type="measure"/>
                </graph>
            </field>
        </record>

        <!-- Serach view of bsg_vehicle_cargo_sale -->
        <record id="view_bsg_vehicle_cargo_sale_search" model="ir.ui.view">
            <field name="name">bsg_vehicle_cargo_sale.search</field>
            <field name="model">bsg_vehicle_cargo_sale</field>
            <field name="arch" type="xml">
                <search string="Cargo Sale">
                    <field name="name"/>
                    <field name="id" string="Reference"/>
                    <field name="customer_number" string="Customer Number"/>
                    <field name="sender_id_card_no"/>
                    <field name="cooperate_customer" string="Cooperate Customer"/>
                    <field name="customer" string="Customer"/>
                    <field name="receiver_id_card_no"/>
                    <field name="receiver_mob_no"/>
                    <field name="owner_name"/>
                    <field name="owner_id_card_no"/>
                    <filter string="My Agreement" name="my_agreement" domain="[('create_uid','=',uid)]"/>
                </search>
            </field>
        </record>
        <!-- Sequence  -->
        <record id="ir_sequence_bsg_cargo_sale" model="ir.sequence">
            <field name="name">bsg_vehicle_cargo_sale</field>
            <field name="code">bsg_vehicle_cargo_sale</field>
            <field name="prefix">%(y)s%(month)s</field>
            <field name="padding">5</field>
        </record>

        <!-- Action for local Cargo -->
        <record model="ir.actions.act_window" id="action_bsg_vehicle_cargo_sale">
            <field name="name">Local Cargo Sale</field>
            <field name="res_model">bsg_vehicle_cargo_sale</field>
            <field name="context">{'default_cargo_sale_type': 'local',"search_default_my_agreement":1}</field>
            <field name="domain">[('cargo_sale_type', '=', 'local'),('payment_method.code','=', 'pod')]</field>
<!--            <field name="view_type">form</field>-->
            <field name="view_mode">tree,kanban,pivot,graph,form</field>
        </record>

        <!-- Action for local Cargo All-->
        <record model="ir.actions.act_window" id="action_bsg_vehicle_cargo_sale_for_all">
            <field name="name">Local Cargo Sale</field>
            <field name="res_model">bsg_vehicle_cargo_sale</field>
            <field name="context">{'default_cargo_sale_type': 'local',"search_default_my_agreement":1}</field>
            <field name="domain">[('cargo_sale_type', '=', 'local'),('payment_method.code', 'in', ['pod','cash','credit'])]</field>
<!--            <field name="view_type">form</field>-->
            <field name="view_mode">tree,kanban,pivot,graph,form</field>
        </record>

        <!-- Action for international Cargo -->
        <record model="ir.actions.act_window" id="action_bsg_vehicle_cargo_sale_international">
            <field name="name">International Cargo Sale</field>
            <field name="res_model">bsg_vehicle_cargo_sale</field>
            <field name="context">{'default_cargo_sale_type': 'international',"search_default_my_agreement":1}</field>
            <field name="domain">[('cargo_sale_type', '=', 'international')]</field>
<!--            <field name="view_type">form</field>-->
            <field name="view_mode">tree,kanban,pivot,graph,form</field>
        </record>


        <menuitem name="Cargo Sale"
                  id="cargo_sale_root_meun"
                  parent="sale.sale_menu_root"
                  sequence="0"
                  groups="base.group_erp_manager,bsg_cargo_sale.group_create_agreement_for_individual,bsg_cargo_sale.group_confirm_agreement,bsg_cargo_sale.group_view_my_agreement,bsg_cargo_sale.group_update_agreement_info,bsg_cargo_sale.group_view_all_agreements,bsg_cargo_sale.group_create_agreement_for_corporate,bsg_cargo_sale.group_register_payment_on_agreement"

        />

        <menuitem name="Local Cargo Sale"
                  id="cargo_sale_root_meun_for_local"
                  parent="cargo_sale_root_meun"
                  action="action_bsg_vehicle_cargo_sale"
                  sequence="1"
                  groups="base.group_erp_manager,bsg_cargo_sale.group_local_cargo_sale"
        />

        <menuitem name="Local Cargo Sale"
                  id="cargo_sale_root_meun_for_local_for_all"
                  parent="cargo_sale_root_meun"
                  action="action_bsg_vehicle_cargo_sale_for_all"
                  sequence="2"
        />

        <menuitem name="International Cargo Sale"
                  id="cargo_sale_root_meun_for_international"
                  parent="cargo_sale_root_meun"
                  action="action_bsg_vehicle_cargo_sale_international"
                  sequence="3"
                  groups="base.group_erp_manager,bsg_cargo_sale.group_international_cargo_sale"
        />

        <record model="ir.ui.view" id="view_view_bsg_customer_contract_inherit">
            <field name="name">view_bsg_customer_contract_form_inherit</field>
            <field name="model">bsg_customer_contract</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="bsg_customer_contract.view_bsg_customer_contract_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='cont_end_date']" position="after">
                    <field name="commercial_reg_expiry_date"/>
                </xpath>
                <xpath expr="//field[@name='contract_date']" position="after">
                    <field name="payment_method_ids" attrs="{'readonly':[('state','!=','draft')]}" widget="many2many_tags"/>
                </xpath>
                <xpath expr="//div[@name='button_box']" position="after">
                    <field name="reg_exp_alert" invisible="1"/>
                    <field name="reg_near_exp_alert" invisible="1"/>
                    <field name="cont_near_end_alert" invisible="1"/>
                    <field name="cont_end_alert" invisible="1"/>
                    <div role="alert" class="alert alert-danger"
                         style="height:35px;width:900px;margin-bottom:1px;background-color:red;font-weight:bold;color:white;"
                         attrs="{'invisible':[('reg_exp_alert','=',False)]}">The commercial registration of the customer
                        is expired..
                    </div>
                    <div role="alert" class="alert alert-danger"
                         style="height:35px;width:900px;margin-bottom:1px;background-color:red;font-weight:bold;color:white;"
                         attrs="{'invisible':[('reg_near_exp_alert','=',False)]}">The commercial registration of the
                        customer is renewed due to the imminent expiration of the commercial registration..
                    </div>
                    <div role="alert" class="alert alert-danger"
                         style="height:35px;width:800px;margin-bottom:1px;background-color:red;font-weight:bold;color:white;"
                         attrs="{'invisible':[('cont_end_alert','=',False)]}">The contract with the client is expired..
                    </div>
                    <div role="alert" class="alert alert-danger"
                         style="height:35px;width:800px;margin-bottom:1px;background-color:red;font-weight:bold;color:white;"
                         attrs="{'invisible':[('cont_near_end_alert','=',False)]}">The contract with the client is
                        renewed due to the imminent expiration of the contract..
                    </div>
                </xpath>
            </field>
        </record>
        <record model="ir.ui.view" id="view_tree_bsg_customer_contract_inherit">
            <field name="name">view_bsg_customer_contract_tree_inherit</field>
            <field name="model">bsg_customer_contract</field>
            <field name="inherit_id" ref="bsg_customer_contract.view_bsg_customer_contract_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="inside">
                    <field name="reg_exp_alert" invisible="1"/>
                    <field name="cont_end_alert" invisible="1"/>
                </xpath>
                <xpath expr="//tree" position="attributes">
                    <field name="decoration-info">reg_exp_alert==True</field>
                    <field name="decoration-danger">cont_end_alert==True</field>
                </xpath>
            </field>
        </record>
    </data>
</odoo>

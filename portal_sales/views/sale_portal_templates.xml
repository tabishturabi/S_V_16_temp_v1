<odoo>


    <template id="portal_my_home_menu_shipment" name="Portal layout : Vehicle Shipment"
              inherit_id="portal.portal_breadcrumbs" priority="30">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-if="page_name == 'shipment'" t-attf-class="breadcrumb-item #{'active ' if not shipment else ''}">
                <a t-if="shipment" t-attf-href="/my/shipments?{{ keep_query() }}">Shipments</a>
                <t t-else="">Shipments</t>
            </li>
            <li t-if="shipment" class="breadcrumb-item active">
                <t t-esc="shipment.name" t-if="shipment.name"/>
                <t t-else="">
                    <em>Shipment</em>
                </t>
            </li>
        </xpath>
    </template>

    <template id="portal_my_sale_vehicle_order" name="Portal My Home : Sale Vehicle Order"
              inherit_id="portal.portal_my_home" priority="30">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-if="vehicle_order_count" t-call="portal.portal_docs_entry">
                <t t-set="title">Vehicle Shipment</t>
                <t t-set="url" t-value="'/my/shipments'"/>
                <t t-set="count" t-value="vehicle_order_count"/>
            </t>
        </xpath>
    </template>

    <template id="portal_hide_purchase_portal_docs_entry" name="Portal My Home : Hide Purchase"
              inherit_id="portal.portal_docs_entry" priority="30">
        <xpath expr="//a" position="replace">
            <t t-if="url != '/my/purchase'">
                <a t-att-href="url" t-att-title="title"
                   class="list-group-item list-group-item-action d-flex align-items-center justify-content-between">
                    <t t-esc="title"/>
                    <span class="badge badge-secondary badge-pill" t-esc="count"/>
                </a>
            </t>

        </xpath>
    </template>

    <template id="portal_my_shipments" name="My Shipments">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Shipment Lines</t>
            </t>
            <t t-if="not shipments">
                <p>There are currently no shipments Lines for your account.</p>
            </t>
            <t t-if="shipments" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>Number #</th>
                        <th>Order Date</th>
                        <!--th class='d-none d-md-table-cell'>Type</th>
                        <th class='d-none d-md-table-cell'>Payment</th-->
                        <th class='d-none d-md-table-cell'>From</th>
                        <th class='d-none d-md-table-cell'>To</th>
                        <th>Status</th>
                        <th class="text-right">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="shipments" t-as="shipment">
                        <tr>
                            <td>
                                <a t-att-href="shipment.get_portal_url()" t-att-title="shipment.name">
                                    <t t-esc="shipment.name"/>
                                </a>
                            </td>
                            <td>
                                <span t-field="shipment.order_date"/>
                            </td>
                            <!--td class='d-none d-md-table-cell'><span t-field="shipment.shipment_type"/></td>
                            <td class='d-none d-md-table-cell'><span t-field="shipment.payment_method.payment_method_name"/></td-->
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.loc_from.route_waypoint_name"/>
                            </td>
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.loc_to.route_waypoint_name"/>
                            </td>
                            <td class="tx_status">
                                <t t-if="shipment.state not in ['done','cancel','cancel_request']">
                                    <span class="badge badge-pill badge-info">
                                        <i class="fa fa-fw fa-clock-o" aria-label="Opened" title="Opened"
                                           role="img"></i>
                                        <span class="d-none d-md-inline">
                                            <span t-field="shipment.state"/>
                                        </span>
                                    </span>
                                </t>
                                <t t-if="shipment.state == 'done'">
                                    <span class="badge badge-pill badge-success">
                                        <i class="fa fa-fw fa-check" aria-label="Done" title="Done" role="img"></i>
                                        <span class="d-none d-md-inline">Done</span>
                                    </span>
                                </t>
                                <t t-if="shipment.state == 'cancel'">
                                    <span class="badge badge-pill badge-warning">
                                        <i class="fa fa-fw fa-remove" aria-label="Cancelled" title="Cancelled"
                                           role="img"></i>
                                        <span class="d-none d-md-inline">Cancelled</span>
                                    </span>
                                </t>
                                <t t-if="shipment.state == 'cancel_request'">
                                    <span class="badge badge-pill badge-warning">
                                        <i class="fa fa-fw fa-clock-o" aria-label="Cancel Requested"
                                           title="Cancel Requested" role="img"></i>
                                        <span class="d-none d-md-inline">Cancel Request</span>
                                    </span>
                                </t>


                            </td>
                            <td class="text-right">
                                <span t-esc="shipment.total_so_amount"
                                      t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </t>
        </t>
    </template>

    <template id="portal_my_shipmentlines" name="My Shipments Lines">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Shipment Lines</t>
            </t>
            <t t-if="not shipments">
                <p>There are currently no shipment lines for your account.</p>
            </t>
            <t t-if="shipments" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>Number #</th>
                        <th>Order Date</th>
                        <!--th class='d-none d-md-table-cell'>Type</th>
                        <th class='d-none d-md-table-cell'>Payment</th-->
                        <th class='d-none d-md-table-cell'>From</th>
                        <th class='d-none d-md-table-cell'>To</th>
                        <th class='d-none d-md-table-cell'>Chasis NO</th>
                        <th class='d-none d-md-table-cell'>Car Make/Car Model</th>
                        <th>Status</th>
                        <th class="text-right">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="shipments" t-as="shipment">
                        <tr>
                            <td>
                                <a t-att-href="shipment.get_portal_url()" t-att-title="shipment.bsg_cargo_sale_id.name">
                                    <t t-esc="shipment.bsg_cargo_sale_id.name"/>
                                </a>
                            </td>
                            <td>
                                <span t-field="shipment.bsg_cargo_sale_id.order_date"/>
                            </td>
                            <!--td class='d-none d-md-table-cell'><span t-field="shipment.shipment_type"/></td>
                            <td class='d-none d-md-table-cell'><span t-field="shipment.payment_method.payment_method_name"/></td-->
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.bsg_cargo_sale_id.loc_from.route_waypoint_name"/>
                            </td>
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.bsg_cargo_sale_id.loc_to.route_waypoint_name"/>
                            </td>
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.chassis_no"/>
                            </td>
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.car_make.display_name"/>
                                <span>/</span>
                                <span t-field="shipment.car_model.display_name"/>
                            </td>
                            <td class="tx_status">
                                <t t-if="shipment.bsg_cargo_sale_id.state not in ['done','cancel','cancel_request']">
                                    <span class="badge badge-pill badge-info">
                                        <i class="fa fa-fw fa-clock-o" aria-label="Opened" title="Opened"
                                           role="img"></i>
                                        <span class="d-none d-md-inline">
                                            <span t-field="shipment.bsg_cargo_sale_id.state"/>
                                        </span>
                                    </span>
                                </t>
                                <t t-if="shipment.bsg_cargo_sale_id.state == 'done'">
                                    <span class="badge badge-pill badge-success">
                                        <i class="fa fa-fw fa-check" aria-label="Done" title="Done" role="img"></i>
                                        <span class="d-none d-md-inline">Done</span>
                                    </span>
                                </t>
                                <t t-if="shipment.bsg_cargo_sale_id.state == 'cancel'">
                                    <span class="badge badge-pill badge-warning">
                                        <i class="fa fa-fw fa-remove" aria-label="Cancelled" title="Cancelled"
                                           role="img"></i>
                                        <span class="d-none d-md-inline">Cancelled</span>
                                    </span>
                                </t>
                                <t t-if="shipment.bsg_cargo_sale_id.state == 'cancel_request'">
                                    <span class="badge badge-pill badge-warning">
                                        <i class="fa fa-fw fa-clock-o" aria-label="Cancel Requested"
                                           title="Cancel Requested" role="img"></i>
                                        <span class="d-none d-md-inline">Cancel Request</span>
                                    </span>
                                </t>
                            </td>
                            <td class="text-right">
                                <span t-esc="shipment.bsg_cargo_sale_id.total_so_amount"
                                      t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </t>
        </t>
    </template>

    <template id="portal_specific_shipmentlines" name="Specific Shipments Lines">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

<!--            <t t-call="portal.portal_searchbar">-->
<!--                <t t-set="title">Shipment Lines</t>-->
<!--            </t>-->
            <t t-if="not shipments">
                <p>There are currently no shipment lines for given parameters.</p>
            </t>
            <t t-if="shipments" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>Number #</th>
                        <th>Order Date</th>
                        <!--th class='d-none d-md-table-cell'>Type</th>
                        <th class='d-none d-md-table-cell'>Payment</th-->
                        <th class='d-none d-md-table-cell'>From</th>
                        <th class='d-none d-md-table-cell'>To</th>
                        <th class='d-none d-md-table-cell'>Chasis NO</th>
                        <th class='d-none d-md-table-cell'>Car Make/Car Model</th>
                        <th>Status</th>
                        <th class="text-right">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="shipments" t-as="shipment">
                        <tr>
                            <td>
                                <a t-att-href="shipment.get_portal_url()" t-att-title="shipment.bsg_cargo_sale_id.name">
                                    <t t-esc="shipment.bsg_cargo_sale_id.name"/>
                                </a>
                            </td>
                            <td>
                                <span t-field="shipment.bsg_cargo_sale_id.order_date"/>
                            </td>
                            <!--td class='d-none d-md-table-cell'><span t-field="shipment.shipment_type"/></td>
                            <td class='d-none d-md-table-cell'><span t-field="shipment.payment_method.payment_method_name"/></td-->
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.bsg_cargo_sale_id.loc_from.route_waypoint_name"/>
                            </td>
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.bsg_cargo_sale_id.loc_to.route_waypoint_name"/>
                            </td>
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.chassis_no"/>
                            </td>
                            <td class='d-none d-md-table-cell'>
                                <span t-field="shipment.car_make.display_name"/>
                                <span>/</span>
                                <span t-field="shipment.car_model.display_name"/>
                            </td>
                            <td class="tx_status">
                                <t t-if="shipment.bsg_cargo_sale_id.state not in ['done','cancel','cancel_request']">
                                    <span class="badge badge-pill badge-info">
                                        <i class="fa fa-fw fa-clock-o" aria-label="Opened" title="Opened"
                                           role="img"></i>
                                        <span class="d-none d-md-inline">
                                            <span t-field="shipment.bsg_cargo_sale_id.state"/>
                                        </span>
                                    </span>
                                </t>
                                <t t-if="shipment.bsg_cargo_sale_id.state == 'done'">
                                    <span class="badge badge-pill badge-success">
                                        <i class="fa fa-fw fa-check" aria-label="Done" title="Done" role="img"></i>
                                        <span class="d-none d-md-inline">Done</span>
                                    </span>
                                </t>
                                <t t-if="shipment.bsg_cargo_sale_id.state == 'cancel'">
                                    <span class="badge badge-pill badge-warning">
                                        <i class="fa fa-fw fa-remove" aria-label="Cancelled" title="Cancelled"
                                           role="img"></i>
                                        <span class="d-none d-md-inline">Cancelled</span>
                                    </span>
                                </t>
                                <t t-if="shipment.bsg_cargo_sale_id.state == 'cancel_request'">
                                    <span class="badge badge-pill badge-warning">
                                        <i class="fa fa-fw fa-clock-o" aria-label="Cancel Requested"
                                           title="Cancel Requested" role="img"></i>
                                        <span class="d-none d-md-inline">Cancel Request</span>
                                    </span>
                                </t>
                            </td>
                            <td class="text-right">
                                <span t-esc="shipment.bsg_cargo_sale_id.total_so_amount"
                                      t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </t>
        </t>
    </template>

    <!--template id="portal_invoice_page" name="Invoice Portal Template" inherit_id="portal.portal_sidebar" primary="True">
        <xpath expr="//div[hasclass('o_portal_sidebar')]" position="inside">
            <t t-set="o_portal_fullwidth_alert" groups="sales_team.group_sale_salesman">
                <t t-call="portal.portal_back_in_edit_mode">
                    <t t-set="backend_url" t-value="'/web#return_label=Website&amp;model=%s&amp;id=%s&amp;action=%s&amp;view_type=form' % (invoice._name, invoice.id, invoice.env.ref('account.action_invoice_tree1').id)"/>
                </t>
            </t>

            <div class="row mt16 o_portal_invoice_sidebar">
                 Sidebar 
                <t t-call="portal.portal_record_sidebar">
                    <t t-set="classes" t-value="'col-lg-auto d-print-none'"/>
                    <t t-set="title">
                        <h2 class="mb-0">
                            <b t-if="invoice.residual > 0" t-field="invoice.residual"/>
                            <b t-else="1" t-field="invoice.amount_total"/>
                        </h2>
                        <div class="small" t-if="invoice.state != 'paid' and invoice.type == 'out_invoice'"><i class="fa fa-clock-o"/><span class="o_portal_sidebar_timeago ml4" t-att-datetime="invoice.date_due"/></div>
                    </t>

                    <t t-set="entries">
                        <ul class="list-group list-group-flush flex-wrap flex-row flex-lg-column">
                            <li class="list-group-item flex-grow-1">
                                <div class="o_download_pdf btn-toolbar flex-sm-nowrap">
                                    <div class="btn-group  flex-grow-1 mr-1 mb-1">
                                        <a class="btn btn-secondary btn-block o_download_btn" t-att-href="invoice.get_portal_url(report_type='pdf', download=True)" title="Download"><i class="fa fa-download"/> Download</a>
                                    </div>
                                    <div class="btn-group flex-grow-1 mb-1">
                                        <a class="btn btn-secondary btn-block o_print_btn o_portal_invoice_print" t-att-href="invoice.get_portal_url(report_type='pdf')" id="print_invoice_report" title="Print" target="_blank"><i class="fa fa-print"/> Print</a>
                                    </div>
                                </div>
                            </li>
                            <li t-if="invoice.user_id" class="list-group-item flex-grow-1">
                                <div class="small mb-1"><strong class="text-muted">Your Contact</strong></div>
                                <div class="row">
                                    <div class="col flex-grow-0 pr-2">
                                        <img t-if="invoice.user_id.image" class="rounded-circle mt-1 o_portal_contact_img" t-att-src="image_data_uri(invoice.user_id.image)" alt="Contact"/>
                                        <img t-else="" class="rounded-circle mt-1 o_portal_contact_img" src="/web/static/src/img/user_menu_avatar.png" alt="Contact"/>
                                    </div>
                                    <div class="col pl-0">
                                        <span t-field="invoice.user_id" t-options='{"widget": "contact", "fields": ["name", "phone"], "no_marker": True}'/>
                                        <a data-toggle="modal" href="#" data-target="#invoice_chatter" class="small"><i class="fa fa-fw fa-comments"/><b>Send message</b></a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </t>
                </t>

                <div id="invoice_content" class="o_portal_page_content col-12 col-lg d-flex flex-column align-items-end">
                    <div class="o_portal_page_size">
                        <t t-if="error or warning" t-call="account.portal_invoice_error"/>
                        <t t-if="success and (not error and not warning)" t-call="account.portal_invoice_success"/>

                        <div class="o_portal_html_view shadow">
                            <div class="o_portal_html_loader text-center">
                                <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw text-black-50"></i>
                            </div>
                            <iframe id="invoice_html" class="mt8 mb8" width="100%" height="100%" frameborder="0" scrolling="no" t-att-src="invoice.get_portal_url(report_type='html')"/>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template-->

    <!--template id="portal_invoice_chatter" name="Allow Comments &amp; History" inherit_id="account.portal_invoice_page">
        <xpath expr="//div[@id='invoice_content']//div[hasclass('o_portal_html_view')]" position="after">
            <div class="modal fade" id="invoice_chatter" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="mt0 ml16 mb0">History</h3>
                            <button type="button" class="close" data-dismiss="modal">&amp;times;</button>
                        </div>
                        <div class="modal-body">
                            <t t-call="portal.message_thread">
                                <t t-set="token" t-value="invoice.access_token"/>
                                <t t-set="object" t-value="invoice"/>
                                <t t-set="pid" t-value="pid"/>
                                <t t-set="hash" t-value="hash"/>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template-->

    <!--template id="portal_invoice_error" name="Invoice error/warning display">
        <div class="row mr16">
            <div t-attf-class="'col-lg-12 mr16 ml16 alert alert-dismissable' #{'alert-danger' if error else 'alert-warning'}" role="alert">
                <a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a>
                <t t-if="error == 'generic'" name="generic">
                    There was an error processing this page.
                </t>
            </div>
        </div>
    </template>

    <template id="portal_invoice_success" name="Invoice success display">
        <div class="row mr16">
            <div class="col-lg-12 mr16 ml16 alert alert-dismissable alert-success" role="status">
                <a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a>
            </div>
        </div>
    </template-->


    <template name="Shipment Order Details" id="shipment_order_details">
        <t t-call="portal.portal_layout">
            <t t-if="shipment">
                <t t-if="request.params.get('success_create_message')">
                    <t t-set="o_portal_fullwidth_alert" class="alert alert-info alert-dismissible rounded-0 fade show">
                        <span class="text-success ml8">
                            <i class="fa fa-check mr4" role="img" aria-label="Success" title="Success"/>
                            Order Create Successfuly
                        </span>
                    </t>
                </t>
                <t t-if="request.params.get('success_edit_message')">
                    <t t-set="o_portal_fullwidth_alert" class="alert alert-info alert-dismissible rounded-0 fade show">
                        <span class="text-success ml8">
                            <i class="fa fa-check mr4" role="img" aria-label="Success" title="Success"/>
                            Order Edit Successfuly
                        </span>
                    </t>
                </t>
                <t t-if="request.params.get('success_delete_message')">
                    <t t-set="o_portal_fullwidth_alert"
                       class="alert alert-danger alert-dismissible rounded-0 fade show">
                        <span class="text-danger ml8">
                            <i class="fa fa-check mr4" role="img" aria-label="Success" title="Success"/>
                            Order Delete Successfuly
                        </span>
                    </t>
                </t>
                <t t-if="request.params.get('success_cancel_message')">
                    <t t-set="o_portal_fullwidth_alert"
                       class="alert alert-danger alert-dismissible rounded-0 fade show">
                        <span class="text-danger ml8">
                            <i class="fa fa-check mr4" role="img" aria-label="Success" title="Success"/>
                            Order Cancel Successfuly
                        </span>
                    </t>
                </t>
                <t t-if="request.params.get('success_upgrade_message')">
                    <t t-set="o_portal_fullwidth_alert" class="alert alert-info alert-dismissible rounded-0 fade show">
                        <span class="text-success ml8">
                            <i class="fa fa-check mr4" role="img" aria-label="Success" title="Success"/>
                            Order Upgrade Successfuly
                        </span>
                    </t>
                </t>
                <t t-if="request.params.get('success_confirm_message')">
                    <t t-set="o_portal_fullwidth_alert" class="alert alert-info alert-dismissible rounded-0 fade show">
                        <span class="text-success ml8">
                            <i class="fa fa-check mr4" role="img" aria-label="Success" title="Success"/>
                            Order Confirmed
                        </span>
                    </t>
                </t>

                <t t-if="request.params.get('error_message')">
                    <t t-set="o_portal_fullwidth_alert"
                       class="alert alert-danger alert-dismissible rounded-0 fade show">
                        <span class="alert alert-danger ml8">
                            <i class="fa fa-check mr4" role="img" aria-label="Error" title="Error"/>
                            Sorry Can't Complete The Process
                        </span>
                    </t>
                </t>
                <t t-if="request.params.get('delete_error_message')">
                    <t t-set="o_portal_fullwidth_alert"
                       class="alert alert-danger alert-dismissible rounded-0 fade show">
                        <span class="alert alert-danger ml8">
                            <i class="fa fa-check mr4" role="img" aria-label="Error" title="Error"/>
                            Sorry Can't Delete Confirmed Order
                        </span>
                    </t>
                </t>
                <!--#########Order###########################-->
                <div id="optional_placeholder"></div>
                <div class="container">


                    <div class="card" id="cargo_sale_order_card_details">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-lg-12" id="cargo_sale_order_card_shipment_name">
                                    <h4 style="display:inline">
                                        <span>Order #</span>
                                        <span t-field="shipment.name"/>
                                    </h4>
                                    <t t-if="not shipment.is_return_so and shipment.state not in ['done','cancel']">
                                        <div class="pull-right" id="cargo_sale_order_edit_operations"
                                             style="display:inline">
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-success dropdown-toggle" type="button"
                                                        data-toggle="dropdown" data-placement="top" aria-haspopup="true"
                                                        aria-expanded="false" data-original-title="Edit">
                                                    <i class="fa fa-edit"></i>
                                                    Edit
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li t-if="shipment.state == 'draft'">
                                                        <a class="dropdown-item" href="#" data-toggle="modal"
                                                           data-target="#sale_order_reciever_edit">Reciever
                                                        </a>
                                                    </li>
                                                    <li t-if="shipment.state not in ['done','cancel']">
                                                        <a class="dropdown-item" href="#" data-toggle="modal"
                                                           data-target="#sale_order_edit_shipment_date">Shipment Date
                                                        </a>
                                                    </li>
                                                    <li t-if="shipment.state == 'draft'">
                                                        <a class="dropdown-item" href="#" data-toggle="modal"
                                                           data-target="#sale_order_edit_locations">Locations
                                                        </a>
                                                    </li>
                                                    <!--li><hr class="dropdown-divider"/></li>
                                                    <li><a class="dropdown-item" href="#">Separated link</a></li-->
                                                </ul>
                                            </div>

                                            <t t-call="portal_sales.cargo_sale_order_reciever_edit"/>

                                            <t t-call="portal_sales.cargo_sale_order_edit_shipment_date"/>

                                            <t t-call="portal_sales.cargo_sale_order_edit_locations"/>
                                        </div>
                                    </t>
                                </div>
                            </div>
                        </div>

                        <div class="card-body" style="margin-bottom:100px">
                            <div class="row" style="margin-bottom:20px">
                                <div t-if="shipment.order_date" class="col-xl-6 row">
                                    <b style="font-weight: bold;" class="col-xl-4">Order Date :</b>
                                    <span class="col-xl-8" t-field="shipment.order_date"/>
                                </div>

                                <div t-if="shipment.shipment_date" class="col-xl-6 row">
                                    <b class="col-xl-4" style="font-weight: bold;">Shipment Date :</b>
                                    <span class="col-xl-8" t-esc="shipment.shipment_date.date().strftime('%d/%m/%Y')"/>
                                </div>

                            </div>

                            <div class="row" style="margin-bottom:20px">
                                <div t-if="shipment.partner_types" class="col-xl-6 row">
                                    <b style="font-weight: bold;" class="col-xl-4">Partner Type :</b>
                                    <span style="font-weight: normal;" class="col-xl-8"
                                          t-field="shipment.partner_types.name"/>
                                </div>

                                <div t-if="shipment.customer" class="col-xl-6 row">
                                    <b style="font-weight: bold;" class="col-xl-4">Customer :</b>
                                    <span class="col-xl-8" t-field="shipment.customer.name"/>
                                </div>
                            </div>

                            <div class="row" style="margin-bottom:20px">
                                <div t-if="shipment.customer_contract" class="col-xl-6 row">
                                    <div style="font-weight: bold;" class="col-xl-4">Contract :</div>
                                    <span class="col-xl-8" t-field="shipment.customer_contract.contract_name"/>
                                </div>
                            </div>

                            <div class="row" style="margin-bottom:20px">
                                <div t-if="shipment.shipment_type" class="col-xl-6 row">
                                    <b style="font-weight: bold;" class="col-xl-4">Agreement Type :</b>
                                    <span class="col-xl-8" t-field="shipment.shipment_type"/>
                                </div>
                            </div>

                            <div class="row" style="margin-bottom:20px">
                                <t t-if="shipment.shipment_type == 'return'">
                                    <div class="col-xl-12">
                                        <b style="font-weight: bold;">First Leg</b>
                                        <span/>
                                    </div>
                                </t>
                            </div>
                            <div class="row" style="margin-bottom:20px">
                                <div t-if="shipment.loc_from" class="col-xl-6 row">
                                    <b class="col-xl-4" style="font-weight: bold;">From :</b>
                                    <span class="col-xl-8" style="font-weight: normal;"
                                          t-field="shipment.loc_from.route_waypoint_name"/>
                                </div>
                                <div t-if="shipment.loc_from" class="col-xl-6 row">
                                    <b class="col-xl-4" style="font-weight: bold;">To :</b>
                                    <span class="col-xl-8" style="font-weight: normal;"
                                          t-field="shipment.loc_to.route_waypoint_name"/>
                                </div>
                            </div>
                            <div class="row" style="margin-bottom:20px">
                                <t t-if="shipment.shipment_type == 'return'">
                                    <div class="col-xl-12">
                                        <b style="font-weight: bold;">Second Leg</b>
                                        <span/>
                                    </div>
                                </t>
                            </div>
                            <div class="row">
                                <t t-if="shipment.shipment_type == 'return'">
                                    <div t-if="shipment.return_loc_from" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-4">From :</b>
                                        <span class="col-xl-8" t-field="shipment.return_loc_from.route_waypoint_name"/>
                                    </div>
                                    <div t-if="shipment.return_loc_to" class="col-xl-6 row">
                                        <b class="col-xl-4" style="font-weight: bold;">To :</b>
                                        <span class="col-xl-8" t-field="shipment.return_loc_to.route_waypoint_name"/>
                                    </div>
                                </t>
                            </div>

                            <div class="row" style="margin-top:10px">
                                <div t-attf-class="form-group row #{error.get('est_no_delivery_days') and 'o_has_error' or ''} col-xl-6">
                                    <label class="col-xl-4 col-form-label" for="est_no_delivery_days"
                                           style="padding-top: 0.75rem;">Expected Delivery :
                                    </label>
                                    <div id="deliver_ex_detail" class="col-xl-8 form-inline">

                                        <span style="padding:5px;">From</span>
                                        <span id="est_no_delivery_days"
                                              style="background-color: rgba(0, 0, 0, 0.03);color: green !important;padding: 0.75rem 1.25rem;text-align: center;">
                                            <t t-esc="shipment.expected_delivery_days"/>
                                        </span>
                                        <span style="padding:5px;">TO</span>

                                        <span id="est_max_no_delivery_days"
                                              style="background-color: rgba(0, 0, 0, 0.03);color: green !important;padding: 0.75rem 1.25rem;text-align: center;">
                                            <t t-esc="shipment.est_max_no_delivery_days"/>
                                        </span>
                                        <span style="padding:5px;">Days</span>
                                        <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                    </div>
                                    <div><font style="color:#eb4623; font-size: 14px;">The actual arrival times will be applied while the vehicle is delivered to the branch</font></div>
                                </div>
                            </div>

                            <div class="row" t-if="shipment.return_so_id" style="margin-top:10px">
                                <div class="col-xl-6 row">
                                    <b style="font-weight: bold;" class="col-xl-4">Return Order :</b>
                                    <a style="color:#17a2b8;" t-att-href="shipment.return_so_id.get_portal_url()"
                                       t-att-title="shipment.return_so_id.name">
                                        <t t-esc="shipment.return_so_id.name"/>
                                    </a>
                                </div>
                            </div>

                            <div class="row"
                                 t-if="shipment.state in ['draft'] and shipment.geting_portal_order_due_amount()">
                                <div class="row mr16">
                                    <div t-attf-class="col-lg-12 mr16 ml16 alert alert-info" role="alert">
                                        <div t-if="sum(shipment.order_line_ids.mapped('discount'))">Please complete the
                                            payment process to get the 10% discount of the online-pay
                                        </div>
                                        <div t-if="not sum(shipment.order_line_ids.mapped('discount'))">Please complete
                                            the payment process
                                        </div>
                                        Your Order will be canceled if you don't pay it in 24 hour

                                    </div>
                                </div>
                            </div>
                            <div class="row" t-if="shipment.state in ['cancel','cancel_request']">
                                <div class="row mr16">
                                    <div t-attf-class="col-lg-12 mr16 ml16 alert alert-danger" role="alert">
                                        <div>
                                            <span>We are disappointed that you canceled the order</span>
                                            <span t-if="shipment.total_so_amount and shipment.invoice_ids.filtered(lambda inv: inv.state == 'paid' and inv.payment_ids)">
                                                , the payment will be refund in 48 hours
                                            </span>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="row" style="margin-top:10px;padding:5px;">
                                <!-- This Is Order Process Buttons-->
                                <t t-if="shipment.shipment_type == 'return' and not shipment.return_so_id and not shipment.is_return_so and shipment.order_line_ids and all(line.state == 'done' for line in shipment.order_line_ids)">
                                    <button id="cargo_initial_return_btn" class="btn btn-primary float-right mb32"
                                            t-att-shipment="shipment.id"
                                            t-att-return_branch_type="shipment.return_loc_to.branch_type">
                                        <span class="fa fa-undo"/>
                                        Initial Return
                                    </button>

                                    <button id="show_initial_return_popup" style="display:none;" data-title="Edit"
                                            data-toggle="modal" data-target="#cago_initial_return_dialog"></button>
                                    <t t-call="portal_sales.portal_cargo_initial_return"/>
                                </t>
                                <t t-if="shipment.state not in ['cancel','cancel_request'] and all(line.state in ['draft','registered'] for line in shipment.order_line_ids)">
                                    <button id="cargo_cancel_order_btn" class="btn btn-danger float-right mb32"
                                            data-title="Cancel" data-toggle="modal" data-target="#sale_order_cancel">
                                        <i class="fa fa-close"></i>
                                        Cancel
                                    </button>
                                    <t t-call="portal_sales.cargo_sale_order_cancel"/>
                                </t>
                                <t t-if="shipment.payment_method.payment_type == 'credit' and shipment.state == 'draft' and shipment.order_line_ids">
                                    <button id="cargo_confirm_order_btn" class="btn btn-success float-right mb32"
                                            data-title="Confim" data-toggle="modal" data-target="#sale_order_confirm">
                                        <i class="fa fa-check"></i>
                                        Confirm
                                    </button>
                                    <t t-call="portal_sales.cargo_sale_order_confrim"/>
                                </t>

                            </div>

                            <div id="initial-return-warnning"></div>

                        </div>


                        <!-- Tab links -->
                        <div class="tab">
                            <button class="tablinks" tab="Order" id="defaultOpen">Order</button>
                            <button class="tablinks" tab="Other_Service">Other Service</button>
                            <button class="tablinks" tab="Shipper_And_Receiver_Details">Shipper And Receiver Details
                            </button>
                        </div>

                        <!--###############Order Line######################-->
                        <!-- Tab links -->
                        <div id="Order" class="tabcontent">
                            <t t-if="shipment.state == 'draft'">
                                <p data-placement="top" data-toggle="tooltip" title="Create">
                                    <button class="btn btn-primary" data-title="Create" data-toggle="modal"
                                            data-target="#create_new" id="create_line_btn">
                                        <i class="fa fa-plus o_add"/>
                                        Add Car
                                    </button>
                                </p>
                            </t>
                            <!--######################### Create PopUp########################-->
                            <t t-call="portal_sales.cargo_sale_line_create_new"/>
                            <!--########################End Create Popup######################-->
                            <div style="margin-bottom:100px">
                                <t t-if="shipment.order_line_ids" t-call="portal.portal_table">
                                    <thead>
                                        <th>Car Maker</th>
                                        <th>Model</th>
                                        <th>Car Size</th>
                                        <th>Shipment Type</th>
                                        <th>Year</th>
                                        <!--th>Color</th-->
                                        <th>Plate No</th>
                                        <!--th>Satah Type</th-->
                                        <!--th>Status</th-->
                                        <th>Discount (%)</th>
                                        <!--th>Tax Amount</th-->
                                        <!--th>Satah Amount</th-->
                                        <!--th>Amount without Tax</th-->
                                        <th>Amount with Tax</th>
                                        <t t-if="shipment.state == 'draft'">
                                            <th>Edit</th>
                                            <th>Delete</th>
                                        </t>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="shipment.order_line_ids" t-as="line">
                                            <tr>
                                                <td>
                                                    <p t-esc="'ar' in default_lang and line.car_make.car_maker.car_make_ar_name or line.car_make.car_maker.car_make_name"></p>
                                                </td>
                                                <td>
                                                    <p t-esc="line.car_model.car_model_name"></p>
                                                </td>
                                                <td>
                                                    <p t-esc="line.car_size.car_size_name"></p>
                                                </td>
                                                <td>
                                                    <p t-esc="line.shipment_type.car_shipment_name"></p>
                                                </td>
                                                <td>
                                                    <p t-esc="line.year.car_year_name"></p>
                                                </td>
                                                <!--td><p t-esc="line.car_color.vehicle_color_name"></p></td-->
                                                <td>
                                                    <p t-field="line.general_plate_no"></p>
                                                </td>
                                                <!--td><p t-esc="line.type"></p></td-->
                                                <!--td><p t-esc="line.state"></p></td-->
                                                <td>
                                                    <p t-field="line.discount"
                                                       t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'></p>
                                                </td>
                                                <!--td><p t-esc="line.tax_amount"></p></td-->
                                                <!--td><p t-esc="line.amount_with_satah"></p></td-->
                                                <!--td><p t-esc="line.total_without_tax"></p></td-->
                                                <td>
                                                    <p t-field="line.charges"
                                                       t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'></p>
                                                </td>
                                                <t t-if="shipment.state == 'draft' and not shipment.is_return_so">
                                                    <td>
                                                        <p data-placement="top" data-toggle="tooltip" title="Edit">
                                                            <button class="btn btn-primary btn-xs line_edit_btn"
                                                                    data-title="Edit" data-toggle="modal"
                                                                    data-target="#edit_cargo_sale_line"
                                                                    t-att-id="str(line_index)">
                                                                <i class="fa fa-pencil"/>
                                                            </button>
                                                        </p>
                                                    </td>
                                                    <td>
                                                        <p data-placement="top" data-toggle="tooltip" title="Delete">
                                                            <button class="btn btn-danger btn-xs" data-title="Delete"
                                                                    data-toggle="modal" data-target="#delete">
                                                                <i class="fa fa-trash"/>
                                                            </button>
                                                        </p>
                                                    </td>
                                                </t>
                                                <!--td><a role="button" groups="base.group_system" target="_blank" aria-label="Open In Odoo" title="Open In Odoo"
                                                    t-att-href="'/web#model=%s&amp;id=%s&amp;action=%s&amp;view_type=form' % ('res.users', user.id, 'base.action_res_users')">
                                                    Open In Odoo</a>
                                                </td-->
                                            </tr>


                                            <!-- ###########Edit PopUp#################-->
                                            <t t-call="portal_sales.cargo_sale_line_detail_form"/>
                                            <!--####################End Edit PopUp###################-->

                                            <!--####################Delete Popup#######################-->
                                            <t t-call="portal_sales.cargo_sale_line_delete"/>
                                            <!--######################### End Delete Popup####################-->


                                        </t>

                                    </tbody>

                                </t>
                            </div>
                            <!--########End Of Table####################-->
                            <!-- ###########Edit PopUp#################-->
                            <t t-call="portal_sales.cargo_sale_line_edit_popup"/>
                            <!--####################End Edit PopUp###################-->

                            <div class="card-footer">
                                <div class="clearfix">
                                    <div id="total" class="row" name="total">
                                        <div t-attf-class="col-sm-7 col-md-5 ml-auto">
                                            <table class="table table-sm">
                                                <div class="border-black o_subtotal">
                                                    <tr>
                                                        <td>
                                                            <strong>Cost:</strong>
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-field="shipment.total_without_tax"
                                                                  t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td>
                                                            <strong>Discount:</strong>
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-field="shipment.total_discount"
                                                                  t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td>
                                                            <strong>Tax Amount:</strong>
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-field="shipment.tax_amount_total"
                                                                  t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                                                        </td>
                                                    </tr>
                                                    <tr class="o_price_total">
                                                        <td>
                                                            <strong>Service Amount:</strong>
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-esc="shipment.total_service_amount"
                                                                  t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td>
                                                            <strong>Service Tax:</strong>
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-field="shipment.total_service_tax"
                                                                  t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                                                        </td>
                                                    </tr>
                                                </div>
                                                <tr class="border-black o_total">
                                                    <td>
                                                        <strong>Total So Amount:</strong>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-field="shipment.total_so_amount"
                                                              t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                                                    </td>
                                                </tr>

                                                <tr class="border-black o_total">
                                                    <td>
                                                        <strong>Paid Amount:</strong>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="sum(shipment.order_line_ids.mapped('paid_amount'))"
                                                              t-options='{"widget": "monetary", "display_currency": shipment.currency_id}'/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--###################End Of Footer##############################3-->
                        </div>
                        <div id="Other_Service" class="tabcontent">

                        </div>

                        <div id="Shipper_And_Receiver_Details" class="tabcontent">
                            <div class="card-body" style="margin-bottom:100px">
                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-12">
                                        <b style="font-weight: bold;">Sender</b>
                                        <span/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-12">
                                        <b style="font-weight: bold;">Same as Customer ?</b>
                                        <input type="checkbox" disabled="disabled"
                                               t-att-checked="shipment.same_as_customer"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Sender Name :</b>
                                        <span class="col-xl-6" t-field="shipment.sender_name"/>
                                    </div>

                                    <div t-if="shipment.sender_id_type" class="col-xl-6 row">
                                        <b class="col-xl-6" style="font-weight: bold;">Sender ID Type :</b>
                                        <span class="col-xl-6" t-field="shipment.sender_id_type"/>
                                    </div>

                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div t-if="shipment.sender_type" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Sender Type :</b>
                                        <span style="font-weight: normal;" class="col-xl-6"
                                              t-field="shipment.sender_type"/>
                                    </div>

                                    <div t-if="shipment.sender_id_card_no" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Sender ID Card No :</b>
                                        <span class="col-xl-6" t-field="shipment.sender_id_card_no"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div t-if="shipment.sender_nationality" class="col-xl-6 row">
                                        <div style="font-weight: bold;" class="col-xl-6">Sender Nationality :</div>
                                        <span class="col-xl-6" t-field="shipment.sender_nationality.name"/>
                                    </div>

                                    <div t-if="shipment.sender_visa_no" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Sender Visa No :</b>
                                        <span class="col-xl-6" t-field="shipment.sender_visa_no"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">

                                </div>


                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-12">
                                        <b style="font-weight: bold;">Owner</b>
                                        <span/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-12">
                                        <b style="font-weight: bold;">Same as Sender ?</b>
                                        <input type="checkbox" disabled="disabled"
                                               t-att-checked="shipment.same_as_sender"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Owner Name :</b>
                                        <span class="col-xl-6" t-field="shipment.owner_name"/>
                                    </div>

                                    <div t-if="shipment.owner_id_type" class="col-xl-6 row">
                                        <b class="col-xl-6" style="font-weight: bold;">Owner ID Type :</b>
                                        <span class="col-xl-6" t-field="shipment.owner_id_type"/>
                                    </div>

                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div t-if="shipment.owner_type" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Owner Type :</b>
                                        <span style="font-weight: normal;" class="col-xl-6"
                                              t-field="shipment.owner_type"/>
                                    </div>

                                    <div t-if="shipment.owner_id_card_no" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Owner ID Card No :</b>
                                        <span class="col-xl-6" t-field="shipment.owner_id_card_no"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div t-if="shipment.owner_nationality" class="col-xl-6 row">
                                        <div style="font-weight: bold;" class="col-xl-6">Owner Nationality :</div>
                                        <span class="col-xl-6" t-field="shipment.owner_nationality.name"/>
                                    </div>


                                    <div t-if="shipment.owner_visa_no" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Owner Visa No :</b>
                                        <span class="col-xl-6" t-field="shipment.owner_visa_no"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">

                                </div>

                                <separator/>


                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-12">
                                        <b style="font-weight: bold;">Receiver</b>
                                        <span/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-12">
                                        <b style="font-weight: bold;">Same as Owner ?</b>
                                        <input type="checkbox" disabled="disabled"
                                               t-att-checked="shipment.same_as_owner"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Receiver Name :</b>
                                        <span class="col-xl-6" t-field="shipment.receiver_name"/>
                                    </div>

                                    <div t-if="shipment.receiver_id_type" class="col-xl-6 row">
                                        <b class="col-xl-6" style="font-weight: bold;">Receiver ID Type :</b>
                                        <span class="col-xl-6" t-field="shipment.receiver_id_type"/>
                                    </div>

                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div t-if="shipment.receiver_type" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Receiver Type :</b>
                                        <span style="font-weight: normal;" class="col-xl-6"
                                              t-field="shipment.receiver_type"/>
                                    </div>

                                    <div t-if="shipment.receiver_id_card_no" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Receiver ID Card No :</b>
                                        <span class="col-xl-6" t-field="shipment.receiver_id_card_no"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">
                                    <div t-if="shipment.receiver_nationality" class="col-xl-6 row">
                                        <div style="font-weight: bold;" class="col-xl-6">Receiver Nationality :</div>
                                        <span class="col-xl-6" t-field="shipment.receiver_nationality.name"/>
                                    </div>

                                    <div t-if="shipment.receiver_visa_no" class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">Receiver Visa No :</b>
                                        <span class="col-xl-6" t-field="shipment.receiver_visa_no"/>
                                    </div>
                                </div>


                                <div class="row" style="margin-bottom:20px">
                                    <div t-if="shipment.receiver_mob_no" class="col-xl-6 row">
                                        <div style="font-weight: bold;" class="col-xl-6">Receiver Mobile No :</div>
                                        <span class="col-xl-6" t-field="shipment.receiver_mob_no"/>
                                    </div>

                                    <div class="col-xl-6 row">
                                        <b style="font-weight: bold;" class="col-xl-6">No of Copy :</b>
                                        <span class="col-xl-6" t-field="shipment.no_of_copy"/>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom:20px">

                                </div>

                            </div>
                        </div>


                        <!--############Footer##############################-->

                    </div>

                    <t t-call="portal_sales.portal_cargo_chatter"/>
                </div>

            </t>
        </t>
    </template>

    <template id="portal_cargo_initial_return" name="Cargo Initial Rturn">
        <div class="row" id="cago_initial_return">
            <div class="modal fade" id="cago_initial_return_dialog" role="dialog">
                <div class="modal-dialog modal-content">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">Initial Return</h3>
                            <button type="button" class="close" data-dismiss="modal">&amp;times;</button>
                        </div>
                        <div class="modal-body">
                            <p>Please You have to update :
                                <b>
                                    <t t-esc="shipment.return_loc_to.route_waypoint_name"/>
                                </b>
                            </p>
                            as this is shipping branch and you can't deliver your car to it.

                            <form method="post" id='o_portal_cargo_sale_order_initial_retutrn_form'>
                                <input type="hidden" name="shipment" t-att-value="shipment.id"/>
                                <div t-attf-class="form-group #{error.get('loc_retutrn_to') and 'o_has_error' or ''} col-xl-6">
                                    <label class="col-form-label" for="from">Update To</label>
                                    <select name="loc_return_to"
                                            t-attf-class="form-control #{error.get('loc_retutrn_to') and 'is-invalid' or ''}"
                                            required="required">
                                        <option value="">..To..</option>
                                        <t t-foreach="shipment.return_loc_to.allowed_return_waypoint_ids"
                                           t-as="loc_ret_to">
                                            <t t-if="loc_ret_to.branch_type in ['pickup','both'] and loc_ret_to.id != shipment.return_loc_to.id">
                                                <option t-att-value="'%s' % (loc_ret_to.id)"
                                                        t-esc="loc_ret_to.route_waypoint_name"/>
                                            </t>
                                        </t>
                                    </select>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                </div>

                                <div class="clearfix">
                                    <button type="submit" id="property_submit_cargo_initial_return_form"
                                            class="btn btn-primary float-right mb32">
                                        Confirm
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!--######################### Cancel PopUp########################-->
    <template id="cargo_sale_order_cancel" name="Cargo Order Cancel PopUp">


        <div class="modal fade" id="sale_order_cancel" tabindex="-1" role="dialog" aria-labelledby="edit"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="Heading">Cancel Order</h4>
                        <button type="button" class="close" data-dismiss="modal">
                            <i class="fa fa-remove"></i>
                        </button>

                    </div>
                    <form action="/shipment/cancel/" name="CancelForm" method="post">
                        <div class="modal-body">
                            <div class="alert alert-warning">
                                <span class="glyphicon glyphicon-warning-sign"></span>
                                Are you sure you want to cancel this Record?
                            </div>

                            <div t-attf-class="form-group">
                                <label class="col-form-label" for="cancel_reason">Reason</label>
                                <input type="text" t-attf-class="form-control" name="cancel_reason"
                                       required="required"/>
                                <div class="alert alert-danger" role="alert" style="display:none;"></div>
                            </div>
                        </div>
                        <div class="modal-footer ">

                            <input type="hidden" name="order_id" t-att-value="shipment.id"/>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <button type="submit" class="btn btn-danger"> Yes</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">No</button>

                        </div>
                    </form>
                </div>
            </div>
        </div>


    </template>
    <!--########################End Cancel Popup######################-->


    <!--######################### Confirm PopUp########################-->
    <template id="cargo_sale_order_confrim" name="Cargo Order Confirm PopUp">
        <div class="modal fade" id="sale_order_confirm" tabindex="-1" role="dialog" aria-labelledby="confrim"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="Heading">Confrim Order</h4>
                        <button type="button" class="close" data-dismiss="modal">
                            <i class="fa fa-remove"></i>
                        </button>
                    </div>
                    <form action="/shipment/confirm/" name="Confirm" method="post">
                        <div class="modal-body">
                            <div class="alert alert-info">
                                <span class="glyphicon glyphicon-info-sign"></span>
                                Are You Sure You Want To Confrim This Order
                            </div>
                        </div>
                        <div class="modal-footer ">
                            <input type="hidden" name="order_id" t-att-value="shipment.id"/>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <button type="submit" class="btn btn-danger">Confirm</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </template>
    <!--########################End Confrim Popup######################-->

    <!-- Edit Reciever-->

    <template id="cargo_sale_order_reciever_edit" name="Cargo Order Edit Reciever PopUp">
        <div class="modal fade" id="sale_order_reciever_edit" tabindex="-1" role="dialog" aria-labelledby="edit"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="Heading">Edit Reciever</h4>
                        <button type="button" class="close" data-dismiss="modal">
                            <i class="fa fa-remove"></i>
                        </button>

                    </div>
                    <form action="/shipment/order_edit/" method="post">
                        <div class="modal-body">
                            <div class="row">
                                <input type="hidden" name="default_country" t-att-value="default_country"/>
                                <div t-attf-class="form-group col-xl-6">
                                    <label class="col-form-label" for="receiver_name">Receiver Name</label>
                                    <input type="text" t-attf-class="form-control" name="receiver_name"
                                           required="required" t-att-value="shipment.receiver_name"/>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                </div>

                                <div t-attf-class="form-group #{error.get('receiver_id_type') and 'o_has_error' or ''} col-xl-6">
                                    <label class="col-form-label" for="receiver_id_type">Receiver ID Type</label>
                                    <select name="receiver_id_type"
                                            t-attf-class="form-control #{error.get('receiver_id_type') and 'is-invalid' or ''}"
                                            required="required">
                                        <option value="">..Receiver ID Type..</option>
                                        <t t-foreach="sender_id_type" t-as="id_type">
                                            <option t-att-value="'%s' % (id_type[0])" t-esc="id_type[1]"
                                                    t-att-selected="shipment.receiver_id_type == id_type[0]"/>
                                        </t>
                                    </select>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                </div>

                                <div t-attf-class="form-group #{error.get('receiver_type') and 'o_has_error' or ''} col-xl-6">
                                    <label class="col-form-label" for="receiver_type">Receiver Type</label>
                                    <select name="receiver_type"
                                            t-attf-class="form-control #{error.get('receiver_type') and 'is-invalid' or ''}"
                                            required="required">
                                        <option value="">..Receiver Type..</option>
                                        <t t-foreach="sender_type" t-as="type">
                                            <option t-att-value="'%s' % (type[0])" t-esc="type[1]"
                                                    t-att-selected="shipment.sender_type == type[0]"/>
                                        </t>
                                    </select>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                </div>

                                <div t-attf-class="form-group col-xl-6">
                                    <label class="col-form-label" for="receiver_id_card_no">Receiver ID Card Number
                                    </label>
                                    <input type="text" t-attf-class="form-control" name="receiver_id_card_no"
                                           required="required" t-att-value="shipment.receiver_id_card_no"/>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>

                                </div>

                                <div t-attf-class="form-group #{error.get('receiver_nationality') and 'o_has_error' or ''} col-xl-6">
                                    <label class="col-form-label" for="receiver_nationality">Receiver Nationality
                                    </label>
                                    <select name="receiver_nationality"
                                            t-attf-class="form-control #{error.get('receiver_nationality') and 'is-invalid' or ''}"
                                            required="required">
                                        <option value="">..Receiver Nationality..</option>
                                        <t t-foreach="nationality_ids" t-as="nation_id">
                                            <option t-att-value="'%s' % (nation_id.id)" t-esc="nation_id.name"
                                                    t-att-selected="shipment.receiver_nationality.id == nation_id.id"/>
                                        </t>
                                    </select>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                </div>
                                <div t-attf-class="form-group col-xl-6">
                                    <label class="col-form-label" for="receiver_visa_no">Receiver Visa Number</label>
                                    <input type="text" t-attf-class="form-control" name="receiver_visa_no"
                                           t-att-value="shipment.receiver_visa_no"/>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                </div>
                                <div t-attf-class="form-group col-xl-6">
                                    <label class="col-form-label" for="receiver_mob_no">Receiver Mobile Number</label>
                                    <input type="number" t-attf-class="form-control" name="receiver_mob_no"
                                           required="required" t-att-value="shipment.receiver_mob_no"/>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="hidden" name="order_id" t-att-value="shipment.id"/>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <button type="submit" class="btn btn-success cargo_edit_submit_btn">Save</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </template>

    <!-- End Of Reciver Edit-->


    <!-- Edit Shipment Date-->

    <template id="cargo_sale_order_edit_shipment_date" name="Cargo Order Edit Shipment Date PopUp">
        <div class="modal fade" id="sale_order_edit_shipment_date" tabindex="-1" role="dialog" aria-labelledby="edit"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="Heading">Edit Shipment Date</h4>
                        <button type="button" class="close" data-dismiss="modal">
                            <i class="fa fa-remove"></i>
                        </button>

                    </div>
                    <form action="/shipment/order_edit/" method="post">
                        <div class="modal-body">
                            <div t-attf-class="form-group col-xl-6 form-field o_website_form_custom">
                                <label class="col-form-label">Shipment Date</label>
                                <div class="o_website_form_datetime input-group date" id="datetimepicker4"
                                     data-target-input="nearest">
                                    <input type="text" id="shipment_date"
                                           class="form-control datetimepicker-input o_website_form_input"
                                           data-target="#datetimepicker4" name="shipment_date" required="required"/>
                                    <div class="input-group-append" data-target="#datetimepicker4"
                                         data-toggle="datetimepicker">
                                        <div class="input-group-text">
                                            <i class="fa fa-calendar"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                <div>
                                    <font style="color:#eb4623; font-size: 14px;">You Must Deliver Car in this date or
                                        before it
                                    </font>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer ">

                            <input type="hidden" name="order_id" t-att-value="shipment.id"/>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <button type="submit" class="btn btn-success cargo_edit_submit_btn">Save</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </template>

    <!-- End Of Shipment Date Edit-->


    <!-- Edit Locations-->

    <template id="cargo_sale_order_edit_locations" name="Cargo Order Edit Locations PopUp">
        <div class="modal fade" id="sale_order_edit_locations" tabindex="-1" role="dialog" aria-labelledby="edit"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="Heading">Edit Locations</h4>
                        <button type="button" class="close" data-dismiss="modal">
                            <i class="fa fa-remove"></i>
                        </button>

                    </div>
                    <form action="/shipment/order_edit/" method="post">
                        <div class="modal-body">

                            <div t-attf-class="form-group #{error.get('shipment_type') and 'o_has_error' or ''} col-xl-12">
                                <label class="col-form-label" for="shipment_type">Agreement Type</label>
                                <select name="shipment_type"
                                        t-attf-class="form-control #{error.get('shipment_type') and 'is-invalid' or ''}"
                                        required="required">
                                    <option value="oneway" t-att-selected="shipment.shipment_type == 'oneway'">Oneway
                                    </option>
                                    <option value="return" t-att-selected="shipment.shipment_type == 'return'">Round
                                        Trip
                                    </option>
                                </select>
                                <div class="alert alert-danger" role="alert" style="display:none;"></div>
                            </div>
                            <!--    #########################First##################     -->
                            <div t-attf-class="form-group col-xl-12" id="return_details1" style="display:none;">
                                <label class="col-form-label">First Leg</label>
                            </div>


                            <div t-attf-class="form-group #{error.get('loc_from') and 'o_has_error' or ''} col-xl-12">
                                <label class="col-form-label" for="from">From</label>
                                <select name="loc_from"
                                        t-attf-class="form-control #{error.get('loc_from') and 'is-invalid' or ''}"
                                        required="required">
                                    <option value="">..From..</option>
                                    <t t-foreach="loc_from_ids" t-as="loc_from">
                                        <option t-att-value="'%s' % (loc_from.id)" t-esc="loc_from.route_waypoint_name"
                                                t-att-selected="shipment.loc_from.id == loc_from.id"
                                                t-att-return_branch_type="loc_from.branch_type"
                                                t-att-allowed_return_waypoint_ids="loc_from.allowed_return_waypoint_ids.ids"/>
                                    </t>
                                </select>
                                <div class="alert alert-danger" role="alert" style="display:none;"></div>
                            </div>

                            <div t-attf-class="form-group #{error.get('loc_to') and 'o_has_error' or ''} col-xl-12">
                                <label class="col-form-label" for="loc_to">To</label>
                                <select name="loc_to"
                                        t-attf-class="form-control #{error.get('loc_to') and 'is-invalid' or ''}"
                                        required="required">
                                    <option value="">..To..</option>
                                    <t t-foreach="loc_to_ids" t-as="loc_to">
                                        <option t-att-value="'%s' % (loc_to.id)" style="display:none;"
                                                t-esc="loc_to.route_waypoint_name"
                                                t-att-selected="shipment.loc_to.id == loc_to.id"/>
                                    </t>
                                </select>
                                <div class="alert alert-danger" role="alert" style="display:none;"></div>
                            </div>

                            <!-- #####################Second######################-->

                            <div t-attf-class="form-group col-xl-12" id="return_details2" style="display:none;">
                                <label class="col-form-label">Second Leg</label>
                            </div>

                            <div t-attf-class="form-group #{error.get('return_loc_from') and 'o_has_error' or ''} col-xl-12"
                                 id="return_details3" style="display:none;">
                                <label class="col-form-label" for="return_loc_from">Return From</label>
                                <select name="return_loc_from"
                                        t-attf-class="form-control #{error.get('return_loc_from') and 'is-invalid' or ''}"
                                        disabled="disabled">
                                    <option value="">..Return From..</option>
                                    <t t-foreach="return_loc_ids" t-as="loc_from">
                                        <option t-att-value="'%s' % (loc_from.id)" style="display:none;"
                                                t-esc="loc_from.route_waypoint_name"
                                                t-att-selected="shipment.return_loc_from.id == loc_from.id"/>
                                    </t>
                                </select>
                                <div class="alert alert-danger" role="alert" style="display:none;"></div>
                            </div>

                            <div t-attf-class="form-group #{error.get('return_loc_to') and 'o_has_error' or ''} col-xl-12"
                                 id="return_details4" style="display:none;">
                                <label class="col-form-label" for="return_loc_to">Return To</label>
                                <select name="return_loc_to"
                                        t-attf-class="form-control #{error.get('return_loc_to') and 'is-invalid' or ''}"
                                        disabled="disabled">
                                    <option value="">..Return To..</option>
                                    <t t-foreach="return_loc_ids" t-as="loc_to">
                                        <option t-att-value="'%s' % (loc_to.id)" style="display:none;"
                                                t-esc="loc_to.route_waypoint_name"
                                                t-att-selected="shipment.return_loc_to.id == loc_to.id"/>
                                    </t>
                                </select>
                                <div class="alert alert-danger" role="alert" style="display:none;"></div>
                            </div>


                            <div t-attf-class="form-group #{error.get('est_no_delivery_days') and 'o_has_error' or ''} col-xl-12">
                                <label class="col-xl-4 col-form-label" for="est_no_delivery_days"
                                       style="padding: 0.75rem 1.0rem;text-align: center;">Expected Delivery :
                                </label>
                                <div id="deliver_ex_detail" class="col-xl-8 form-inline">

                                    <span style="padding:5px;">From</span>
                                    <span id="est_no_delivery_days"
                                          style="background-color: rgba(0, 0, 0, 0.03);color: green !important;padding: 0.75rem 1.25rem;text-align: center;">
                                        <t t-esc="shipment.expected_delivery_days"/>
                                    </span>
                                    <span style="padding:5px;">TO</span>

                                    <span id="est_max_no_delivery_days"
                                          style="background-color: rgba(0, 0, 0, 0.03);color: green !important;padding: 0.75rem 1.25rem;text-align: center;">
                                        <t t-esc="shipment.est_max_no_delivery_days"/>
                                    </span>
                                    <span style="padding:5px;">Days</span>
                                    <div class="alert alert-danger" role="alert" style="display:none;"></div>
                                </div>
                                <div><font style="color:#eb4623; font-size: 14px;">The actual arrival times will be applied while the vehicle is delivered to the branch</font></div>
                            </div>

                        </div>
                        <div class="modal-footer ">
                            <input type="hidden" name="order_id" t-att-value="shipment.id"/>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <button type="submit" class="btn btn-success cargo_edit_submit_btn">Save</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </template>

    <!-- End Of Location Edit-->


    <template id="portal_cargo_chatter" name="Allow Comments &amp; History">
        <!-- chatter -->
        <div id="portal_cargo_communication" class="mt-4">
            <h2>Communication</h2>
            <t t-call="portal.message_thread">
                <t t-set="object" t-value="shipment"/>
                <t t-set="token" t-value="shipment.access_token"/>
            </t>
        </div>

        <!--h2>Signature</h2>
        <t t-call="portal.portal_signature">
            <t t-set="object" t-value="shipment"/>
            <t t-set="partner_name" t-value="shipment.customer.name"/>
            <t t-set="callUrl" t-value="shipment.get_portal_url()"/>
            <t t-set="accessToken" t-value="shipment.access_token"/>
        </t-->
    </template>

</odoo>
